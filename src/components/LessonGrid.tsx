import { motion } from "framer-motion";
import { Play, Info, Brain, Clock, Library, Pin, Lock } from "lucide-react";
import { useExercises, Exercise } from "@/contexts/ExercisesContext";
import { useState, useEffect } from "react";

// Locked banks (3-8) for non-pro users
const lockedBanks = ["verbal-bank-3", "verbal-bank-4", "verbal-bank-5", "verbal-bank-6", "verbal-bank-7", "verbal-bank-8"];

// Progress tracking for exercises (from CollectionView)
const COLLECTION_PROGRESS_KEY = "divedive-collection-progress";

interface ExerciseProgress {
  [exerciseId: string]: {
    answeredQuestions: number;
    totalQuestions: number;
  };
}

// Get progress from CollectionView format
const getAllProgress = (): ExerciseProgress => {
  try {
    const stored = localStorage.getItem(COLLECTION_PROGRESS_KEY);
    const collectionProgress = stored ? JSON.parse(stored) : {};
    const result: ExerciseProgress = {};

    // Convert collection progress format to exercise progress format
    for (const [key, value] of Object.entries(collectionProgress)) {
      const progress = value as { answers?: Record<string, number | null>; submitted?: boolean };
      if (progress.answers) {
        const answeredQuestions = Object.values(progress.answers).filter(a => a !== null).length;
        // Extract exercise id from the key (remove -collection suffix if present)
        const exerciseId = key.replace(/-collection$/, '');
        result[exerciseId] = {
          answeredQuestions,
          totalQuestions: Object.keys(progress.answers).length || answeredQuestions,
        };
      }
    }
    return result;
  } catch {
    return {};
  }
};

// نوع السؤال
// ملاحظة: ميزة المحاولات الثلاث (variants) تعمل تلقائياً لجميع الأسئلة
// إذا لم تضف variants يدوياً، سيتم توليدها تلقائياً عند عرض السؤال
// يمكنك إضافة variants مخصصة للحصول على تجربة أفضل
export interface Question {
  id: string;
  prompt: string;
  options: string[];
  correctAnswer: number;
  explanation?: string;
  skillTag?: string;
  howToSolve?: string; // شرح طريقة الحل - يظهر عند قلب البطاقة
  passageText?: string; // نص القطعة لأسئلة استيعاب المقروء
  passageTitle?: string; // عنوان القطعة
  // المحاولات البديلة - إذا أخطأ الطالب يظهر له سؤال مشابه بأرقام مختلفة
  // يتم توليدها تلقائياً إذا لم تُحدد (راجع src/utils/variantGenerator.ts)
  variants?: Array<{
    id: string;
    prompt: string;
    options: string[];
    correctAnswer: number;
    explanation?: string;
  }>;
}

// نوع البنك (إصدار)
export interface Bank {
  id: string;
  name: string;
  questions: Question[];
}

// نوع التجميعة
export interface Collection {
  id: string;
  name: string;
  description: string;
  category: "quantitative" | "verbal";
  questions: Question[];
  banks?: Bank[]; // للتجميعات التي تحتوي على بنوك متعددة
  hasFlipFeature?: boolean; // ميزة قلب البطاقة لعرض طريقة الحل
}

// التجميعات المثبتة
export const pinnedCollections: Record<string, Collection[]> = {
  quantitative: [
    {
      id: "quant-collection-mufakkir",
      name: "تجميعات المفكر",
      description: "تجميعات المفكر للقسم الكمي",
      category: "quantitative",
      hasFlipFeature: true,
      questions: [],
      banks: [
        {
          id: "bank-1",
          name: "الإصدار ١",
          questions: [
            {
              id: "b1-q1",
              prompt: "(ص ، ٥) ، (٥ ، ٩) ، (٣ ، س) حيث (٥ ، ٩) نقطة منتصف بينهم، قارن بين: القيمة الأولى: ص، القيمة الثانية: س",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 1,
              howToSolve: "نقطة المنتصف = ((س١+س٢)/٢ ، (ص١+ص٢)/٢)\n\nلإيجاد ص: (ص + ٣)/٢ = ٥ → ص = ٧\nلإيجاد س: (٥ + س)/٢ = ٩ → س = ١٣\n\nالمقارنة: ٧ < ١٣ ← القيمة الثانية أكبر",
              variants: [
                {
                  id: "b1-q1-v1",
                  prompt: "(ص ، ٣) ، (٤ ، ٧) ، (٢ ، س) حيث (٤ ، ٧) نقطة منتصف بينهم، قارن بين: القيمة الأولى: ص، القيمة الثانية: س",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "ص = ٦، س = ١١ ← القيمة الثانية أكبر",
                },
                {
                  id: "b1-q1-v2",
                  prompt: "(ص ، ٤) ، (٦ ، ٨) ، (٢ ، س) حيث (٦ ، ٨) نقطة منتصف بينهم، قارن بين: القيمة الأولى: ص، القيمة الثانية: س",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "ص = ١٠، س = ١٢ ← القيمة الثانية أكبر",
                },
              ],
            },
            {
              id: "b1-q2",
              prompt: "مربع ومستطيل قطراهما متساويان (٥ سم)، قارن بين: القيمة الأولى: مساحة المربع، القيمة الثانية: مساحة المستطيل",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 0,
              howToSolve: "مساحة المربع = (القطر)²/٢ = ٢٥/٢ = ١٢.٥ سم²\n\nمساحة المستطيل = (الطول × العرض)\nبما أن القطر ثابت والأبعاد مختلفة، فإن أكبر مساحة تكون للمربع\n\nقاعدة: من بين جميع المستطيلات ذات القطر المتساوي، المربع له أكبر مساحة",
              variants: [
                {
                  id: "b1-q2-v1",
                  prompt: "مربع ومستطيل قطراهما متساويان (١٠ سم)، قارن بين: القيمة الأولى: مساحة المربع، القيمة الثانية: مساحة المستطيل",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "المربع دائماً له أكبر مساحة عند تساوي القطر",
                },
                {
                  id: "b1-q2-v2",
                  prompt: "مربع ومستطيل قطراهما متساويان (٨ سم)، قارن بين: القيمة الأولى: مساحة المربع، القيمة الثانية: مساحة المستطيل",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "المربع دائماً له أكبر مساحة عند تساوي القطر",
                },
              ],
            },
            {
              id: "b1-q3",
              prompt: "٢ / (√٣ - ١) = ؟",
              options: ["√٣ + ١", "√٣ - ١", "√٣ - ٢", "√٣ + ٢"],
              correctAnswer: 0,
              howToSolve: "نضرب البسط والمقام في المرافق (√٣ + ١):\n\n٢/(√٣ - ١) × (√٣ + ١)/(√٣ + ١)\n= ٢(√٣ + ١) / (٣ - ١)\n= ٢(√٣ + ١) / ٢\n= √٣ + ١",
              variants: [
                {
                  id: "b1-q3-v1",
                  prompt: "٣ / (√٥ - √٢) = ؟",
                  options: ["√٥ + √٢", "√٥ - √٢", "٢√٥ + √٢", "√٥ + ٢√٢"],
                  correctAnswer: 0,
                  explanation: "نضرب في المرافق: ٣(√٥+√٢)/(٥-٢) = √٥ + √٢",
                },
                {
                  id: "b1-q3-v2",
                  prompt: "٤ / (√٧ - √٣) = ؟",
                  options: ["√٧ + √٣", "√٧ - √٣", "٢√٧ + √٣", "√٧ + ٢√٣"],
                  correctAnswer: 0,
                  explanation: "نضرب في المرافق: ٤(√٧+√٣)/(٧-٣) = √٧ + √٣",
                },
              ],
            },
            {
              id: "b1-q4",
              prompt: "لدى سلمى أخت أكبر منها بـ ٨ سنوات وأخت أصغر منها بـ سنتين وحاصل ضرب أعمار أخواتها = ٥٦، فكم عمر سلمى؟",
              options: ["٨", "٩", "٦", "٤"],
              correctAnswer: 2,
              howToSolve: "نفرض عمر سلمى = س\nعمر الأخت الكبرى = س + ٨\nعمر الأخت الصغرى = س - ٢\n\n(س + ٨)(س - ٢) = ٥٦\nس² + ٦س - ١٦ = ٥٦\nس² + ٦س - ٧٢ = ٠\n(س + ١٢)(س - ٦) = ٠\nس = ٦ (نأخذ القيمة الموجبة)",
              variants: [
                {
                  id: "b1-q4-v1",
                  prompt: "لدى أحمد أخ أكبر منه بـ ٥ سنوات وأخ أصغر منه بـ ٣ سنوات وحاصل ضرب أعمار إخوته = ٤٠، فكم عمر أحمد؟",
                  options: ["٦", "٧", "٨", "٥"],
                  correctAnswer: 2,
                  explanation: "(س+٥)(س-٣) = ٤٠ ← س = ٨",
                },
                {
                  id: "b1-q4-v2",
                  prompt: "لدى نورة أخت أكبر منها بـ ٦ سنوات وأخت أصغر منها بـ ٤ سنوات وحاصل ضرب أعمار أخواتها = ٧٠، فكم عمر نورة؟",
                  options: ["٧", "٨", "٩", "١٠"],
                  correctAnswer: 2,
                  explanation: "(س+٦)(س-٤) = ٧٠ ← س = ٩",
                },
              ],
            },
            {
              id: "b1-q5",
              prompt: "إذا كان ٥^٢٠ / ٥^س = ٥^ص، أوجد متوسط س ، ص",
              options: ["١٠", "١٥", "٢٠", "٢٥"],
              correctAnswer: 0,
              howToSolve: "قاعدة الأسس: أ^م / أ^ن = أ^(م-ن)\n\n٥^٢٠ / ٥^س = ٥^(٢٠-س) = ٥^ص\n∴ ص = ٢٠ - س\n∴ س + ص = ٢٠\n\nالمتوسط = (س + ص)/٢ = ٢٠/٢ = ١٠",
              variants: [
                {
                  id: "b1-q5-v1",
                  prompt: "إذا كان ٣^٣٠ / ٣^س = ٣^ص، أوجد متوسط س ، ص",
                  options: ["١٠", "١٥", "٢٠", "٢٥"],
                  correctAnswer: 1,
                  explanation: "س + ص = ٣٠، المتوسط = ١٥",
                },
                {
                  id: "b1-q5-v2",
                  prompt: "إذا كان ٢^٤٠ / ٢^س = ٢^ص، أوجد متوسط س ، ص",
                  options: ["١٠", "١٥", "٢٠", "٢٥"],
                  correctAnswer: 2,
                  explanation: "س + ص = ٤٠، المتوسط = ٢٠",
                },
              ],
            },
            {
              id: "b1-q6",
              prompt: "كم عدد المئات في العدد ٩٩٨٦٠ ؟",
              options: ["٩٩٨٠٠", "٩٩٨", "٩٩٩٠٠", "٩٩٩"],
              correctAnswer: 1,
              howToSolve: "عدد المئات = العدد ÷ ١٠٠ (مع تجاهل الكسور)\n\n٩٩٨٦٠ ÷ ١٠٠ = ٩٩٨.٦\n\nعدد المئات الكاملة = ٩٩٨",
              variants: [
                {
                  id: "b1-q6-v1",
                  prompt: "كم عدد المئات في العدد ٧٥٤٣٠ ؟",
                  options: ["٧٥٤٠٠", "٧٥٤", "٧٥٥٠٠", "٧٥٥"],
                  correctAnswer: 1,
                  explanation: "٧٥٤٣٠ ÷ ١٠٠ = ٧٥٤.٣ ← عدد المئات = ٧٥٤",
                },
                {
                  id: "b1-q6-v2",
                  prompt: "كم عدد المئات في العدد ٤٥٦٧٠ ؟",
                  options: ["٤٥٦٠٠", "٤٥٦", "٤٥٧٠٠", "٤٥٧"],
                  correctAnswer: 1,
                  explanation: "٤٥٦٧٠ ÷ ١٠٠ = ٤٥٦.٧ ← عدد المئات = ٤٥٦",
                },
              ],
            },
            {
              id: "b1-q7",
              prompt: "قارن بين: القيمة الأولى: √(١٠٠ + ٩)، القيمة الثانية: ٣ + ١٠",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 1,
              howToSolve: "القيمة الأولى = √(١٠٠ + ٩) = √١٠٩ ≈ ١٠.٤٤\n\nالقيمة الثانية = ٣ + ١٠ = ١٣\n\n١٠.٤٤ < ١٣\n← القيمة الثانية أكبر\n\nملاحظة: √(أ+ب) ≠ √أ + √ب",
              variants: [
                {
                  id: "b1-q7-v1",
                  prompt: "قارن بين: القيمة الأولى: √(٦٤ + ٣٦)، القيمة الثانية: ٨ + ٦",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "√١٠٠ = ١٠ < ١٤ ← الثانية أكبر",
                },
                {
                  id: "b1-q7-v2",
                  prompt: "قارن بين: القيمة الأولى: √(٤٩ + ١٦)، القيمة الثانية: ٧ + ٤",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "√٦٥ ≈ ٨.٠٦ < ١١ ← الثانية أكبر",
                },
              ],
            },
            {
              id: "b1-q8",
              prompt: "أوجد الحد التالي: ٢ ، ٤ ، ٨ ، ١٤ ، ٢٢ ...",
              options: ["٣٠", "٣٢", "٣٤", "٣٦"],
              correctAnswer: 1,
              howToSolve: "نحسب الفروق بين الأعداد المتتالية:\n٤-٢=٢، ٨-٤=٤، ١٤-٨=٦، ٢٢-١٤=٨\n\nالفروق: ٢، ٤، ٦، ٨ (تزيد بمقدار ٢)\nالفرق التالي = ١٠\n\nالحد التالي = ٢٢ + ١٠ = ٣٢",
              variants: [
                {
                  id: "b1-q8-v1",
                  prompt: "أوجد الحد التالي: ١ ، ٢ ، ٥ ، ١٠ ، ١٧ ...",
                  options: ["٢٤", "٢٦", "٢٨", "٣٠"],
                  correctAnswer: 1,
                  explanation: "الفروق: ١، ٣، ٥، ٧ (تزيد بـ ٢)، التالي = ١٧ + ٩ = ٢٦",
                },
                {
                  id: "b1-q8-v2",
                  prompt: "أوجد الحد التالي: ٣ ، ٦ ، ١١ ، ١٨ ، ٢٧ ...",
                  options: ["٣٦", "٣٨", "٤٠", "٤٢"],
                  correctAnswer: 1,
                  explanation: "الفروق: ٣، ٥، ٧، ٩ (تزيد بـ ٢)، التالي = ٢٧ + ١١ = ٣٨",
                },
              ],
            },
            {
              id: "b1-q9",
              prompt: "أي المدن في زيادة مطردة؟ (رسم بياني يوضح مكة، المدينة، الطائف، عسير من ١٤٣٠ إلى ١٤٣٤)",
              options: ["مكة", "المدينة", "الطائف", "عسير"],
              correctAnswer: 3,
              variants: [
                {
                  id: "b1-q9-v1",
                  prompt: "أي المناطق في زيادة مستمرة؟ (رسم بياني يوضح الرياض، جدة، الدمام، أبها من ٢٠١٨ إلى ٢٠٢٢)",
                  options: ["الرياض", "جدة", "الدمام", "أبها"],
                  correctAnswer: 3,
                  explanation: "أبها في زيادة مستمرة",
                },
                {
                  id: "b1-q9-v2",
                  prompt: "أي الأقسام في نمو مطرد؟ (رسم بياني يوضح المبيعات، التسويق، الإنتاج، الموارد البشرية)",
                  options: ["المبيعات", "التسويق", "الإنتاج", "الموارد البشرية"],
                  correctAnswer: 3,
                  explanation: "الموارد البشرية في نمو مطرد",
                },
              ],
            },
            {
              id: "b1-q10",
              prompt: "ثلاثة أعداد متتالية أحدهم ١١ وحاصل ضربهم ٩٩٠، فما مجموع هذه الأعداد؟",
              options: ["٢٧", "٣٠", "٣٢", "٣٦"],
              correctAnswer: 1,
              howToSolve: "نجرب الاحتمالات مع ١١:\n• ٩، ١٠، ١١ ← ٩×١٠×١١ = ٩٩٠ ✓\n• ١٠، ١١، ١٢ ← ١٠×١١×١٢ = ١٣٢٠ ✗\n• ١١، ١٢، ١٣ ← أكبر من ٩٩٠ ✗\n\nالأعداد: ٩، ١٠، ١١\nالمجموع = ٩ + ١٠ + ١١ = ٣٠",
              variants: [
                {
                  id: "b1-q10-v1",
                  prompt: "ثلاثة أعداد متتالية أحدهم ٨ وحاصل ضربهم ٣٣٦، فما مجموع هذه الأعداد؟",
                  options: ["١٨", "٢١", "٢٤", "٢٧"],
                  correctAnswer: 1,
                  explanation: "٦×٧×٨ = ٣٣٦، المجموع = ٢١",
                },
                {
                  id: "b1-q10-v2",
                  prompt: "ثلاثة أعداد متتالية أحدهم ٥ وحاصل ضربهم ٦٠، فما مجموع هذه الأعداد؟",
                  options: ["٩", "١٢", "١٥", "١٨"],
                  correctAnswer: 1,
                  explanation: "٣×٤×٥ = ٦٠، المجموع = ١٢",
                },
              ],
            },
            {
              id: "b1-q11",
              prompt: "إذا كان ٣ < س < ٥ ، ص > س، قارن بين: القيمة الأولى: ٠٫٧٥، القيمة الثانية: ص/س",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q11-v1",
                  prompt: "إذا كان ٢ < س < ٤ ، ص > س، قارن بين: القيمة الأولى: ٠٫٥، القيمة الثانية: ص/س",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "بما أن ص > س فإن ص/س > ١ > ٠.٥",
                },
                {
                  id: "b1-q11-v2",
                  prompt: "إذا كان ٤ < س < ٦ ، ص > س، قارن بين: القيمة الأولى: ٠٫٨، القيمة الثانية: ص/س",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "بما أن ص > س فإن ص/س > ١ > ٠.٨",
                },
              ],
            },
            {
              id: "b1-q12",
              prompt: "إذا كان ن عدد طبيعي، أوجد متوسط: ن ، ن + ٢ ، ن + ١٠",
              options: ["٣ن + ٤", "٣ن + ١٢", "ن + ٥", "ن + ٤"],
              correctAnswer: 3,
              howToSolve: "المتوسط = مجموع الأعداد ÷ عددها\n\nالمجموع = ن + (ن+٢) + (ن+١٠)\n= ٣ن + ١٢\n\nالمتوسط = (٣ن + ١٢) ÷ ٣\n= ن + ٤",
              variants: [
                {
                  id: "b1-q12-v1",
                  prompt: "إذا كان ن عدد طبيعي، أوجد متوسط: ن ، ن + ٣ ، ن + ٩",
                  options: ["٣ن + ٤", "ن + ٣", "ن + ٤", "ن + ٦"],
                  correctAnswer: 2,
                  explanation: "المجموع = ٣ن + ١٢، المتوسط = ن + ٤",
                },
                {
                  id: "b1-q12-v2",
                  prompt: "إذا كان ن عدد طبيعي، أوجد متوسط: ن ، ن + ٦ ، ن + ١٢",
                  options: ["ن + ٣", "ن + ٤", "ن + ٥", "ن + ٦"],
                  correctAnswer: 3,
                  explanation: "المجموع = ٣ن + ١٨، المتوسط = ن + ٦",
                },
              ],
            },
            {
              id: "b1-q13",
              prompt: "إذا كان √س + ٤ = ١٠، أوجد قيمة س",
              options: ["٢", "٤", "٦", "٨"],
              correctAnswer: 2,
              howToSolve: "√س + ٤ = ١٠\n√س = ١٠ - ٤\n√س = ٦\n\nبتربيع الطرفين:\nس = ٣٦\n\nملاحظة: إذا كانت المعادلة √(س+٤)=١٠\nفإن س+٤=١٠٠ ← س=٩٦",
              variants: [
                {
                  id: "b1-q13-v1",
                  prompt: "إذا كان √س + ٣ = ٨، أوجد قيمة √س",
                  options: ["٣", "٤", "٥", "٦"],
                  correctAnswer: 2,
                  explanation: "√س = ٨ - ٣ = ٥",
                },
                {
                  id: "b1-q13-v2",
                  prompt: "إذا كان √س + ٧ = ١٥، أوجد قيمة √س",
                  options: ["٦", "٧", "٨", "٩"],
                  correctAnswer: 2,
                  explanation: "√س = ١٥ - ٧ = ٨",
                },
              ],
            },
            {
              id: "b1-q14",
              prompt: "ما أعلى يوم من حيث كمية الأمطار؟ (رسم بياني يوضح كمية الأمطار خلال أيام الأسبوع)",
              options: ["السبت", "الأحد", "الإثنين", "الثلاثاء"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q14-v1",
                  prompt: "ما أقل يوم من حيث درجة الحرارة؟ (رسم بياني يوضح درجات الحرارة خلال أيام الأسبوع)",
                  options: ["السبت", "الأحد", "الإثنين", "الثلاثاء"],
                  correctAnswer: 1,
                  explanation: "الأحد هو اليوم الأقل حرارة",
                },
                {
                  id: "b1-q14-v2",
                  prompt: "ما أعلى شهر من حيث المبيعات؟ (رسم بياني يوضح المبيعات خلال أشهر السنة)",
                  options: ["يناير", "فبراير", "مارس", "أبريل"],
                  correctAnswer: 1,
                  explanation: "فبراير هو الشهر الأعلى مبيعات",
                },
              ],
            },
            {
              id: "b1-q15",
              prompt: "أوجد الحد التالي: ٣ ، ٥ ، ٩ ، ......",
              options: ["١٦", "١٧", "١٨", "١٩"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q15-v1",
                  prompt: "أوجد الحد التالي: ٢ ، ٤ ، ٨ ، ......",
                  options: ["١٤", "١٥", "١٦", "١٨"],
                  correctAnswer: 2,
                  explanation: "متتابعة هندسية × ٢، الحد التالي = ١٦",
                },
                {
                  id: "b1-q15-v2",
                  prompt: "أوجد الحد التالي: ١ ، ٣ ، ٧ ، ......",
                  options: ["١٣", "١٤", "١٥", "١٦"],
                  correctAnswer: 2,
                  explanation: "الفروق تتضاعف: ٢، ٤، ٨، الحد التالي = ٧ + ٨ = ١٥",
                },
              ],
            },
            {
              id: "b1-q16",
              prompt: "٨ □ ٤ = ٢، ما العملية المناسبة؟",
              options: ["×", "÷", "+", "-"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q16-v1",
                  prompt: "١٥ □ ٣ = ٥، ما العملية المناسبة؟",
                  options: ["×", "÷", "+", "-"],
                  correctAnswer: 1,
                  explanation: "١٥ ÷ ٣ = ٥",
                },
                {
                  id: "b1-q16-v2",
                  prompt: "٢٠ □ ٤ = ٥، ما العملية المناسبة؟",
                  options: ["×", "÷", "+", "-"],
                  correctAnswer: 1,
                  explanation: "٢٠ ÷ ٤ = ٥",
                },
              ],
            },
            {
              id: "b1-q17",
              prompt: "عجلة طول نصف قطرها ٥٠ سم تدور ٦ دورات، ما المسافة التي قطعتها بالمتر؟",
              options: ["٩٤٫٢", "٩٫٤٢", "٩٤٢", "١٨٫٨٤"],
              correctAnswer: 3,
              howToSolve: "المسافة في الدورة الواحدة = محيط الدائرة\nالمحيط = ٢ × ط × نق = ٢ × ٣.١٤ × ٥٠ = ٣١٤ سم\n\nالمسافة الكلية = ٦ × ٣١٤ = ١٨٨٤ سم\n= ١٨.٨٤ متر",
              variants: [
                {
                  id: "b1-q17-v1",
                  prompt: "عجلة طول نصف قطرها ٢٥ سم تدور ٨ دورات، ما المسافة التي قطعتها بالمتر؟",
                  options: ["٦٫٢٨", "١٢٫٥٦", "٣٫١٤", "٩٫٤٢"],
                  correctAnswer: 1,
                  explanation: "المحيط = ٢×٣.١٤×٢٥ = ١٥٧ سم، المسافة = ٨×١٥٧ = ١٢٥٦ سم = ١٢.٥٦ م",
                },
                {
                  id: "b1-q17-v2",
                  prompt: "عجلة طول نصف قطرها ١٠٠ سم تدور ٥ دورات، ما المسافة التي قطعتها بالمتر؟",
                  options: ["٣١٫٤", "١٥٫٧", "٦٢٫٨", "٤٧٫١"],
                  correctAnswer: 0,
                  explanation: "المحيط = ٢×٣.١٤×١٠٠ = ٦٢٨ سم، المسافة = ٥×٦٢٨ = ٣١٤٠ سم = ٣١.٤ م",
                },
              ],
            },
            {
              id: "b1-q18",
              prompt: "إذا كانت المسافة من س إلى ص = ١٢ والمسافات بينهما متساوية (س، ل، ع، ص)، قارن بين: القيمة الأولى: ٣، القيمة الثانية: س ل",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q18-v1",
                  prompt: "إذا كانت المسافة من أ إلى ب = ١٥ والمسافات بينهما متساوية (أ، ج، د، هـ، ب)، قارن بين: القيمة الأولى: ٣، القيمة الثانية: أ ج",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "المسافة = ١٥ ÷ ٤ = ٣.٧٥، لكن ٣ < ٣.٧٥ ← الأولى أصغر... الثانية أكبر",
                },
                {
                  id: "b1-q18-v2",
                  prompt: "إذا كانت المسافة من م إلى ن = ٢٠ والمسافات بينهما متساوية (م، ر، ز، ن)، قارن بين: القيمة الأولى: ٥، القيمة الثانية: م ر",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "المسافة = ٢٠ ÷ ٣ ≈ ٦.٦٧ > ٥ ← الثانية أكبر",
                },
              ],
            },
            {
              id: "b1-q19",
              prompt: "ما عدد المئات في العدد: ٧٩٦٣٥ ؟",
              options: ["٧٩٦", "٩٦", "٦٣", "٦"],
              correctAnswer: 0,
              variants: [
                {
                  id: "b1-q19-v1",
                  prompt: "ما عدد المئات في العدد: ٥٤٣٢١ ؟",
                  options: ["٥٤٣", "٤٣", "٣٢", "٢"],
                  correctAnswer: 0,
                  explanation: "٥٤٣٢١ ÷ ١٠٠ = ٥٤٣.٢١ ← عدد المئات = ٥٤٣",
                },
                {
                  id: "b1-q19-v2",
                  prompt: "ما عدد المئات في العدد: ٨٧٦٥٤ ؟",
                  options: ["٨٧٦", "٧٦", "٦٥", "٥"],
                  correctAnswer: 0,
                  explanation: "٨٧٦٥٤ ÷ ١٠٠ = ٨٧٦.٥٤ ← عدد المئات = ٨٧٦",
                },
              ],
            },
            {
              id: "b1-q20",
              prompt: "ما عدد الأعداد الصحيحة من ١ إلى ٤٠ التي تحتوي خاناتها على ٢ أو ٣ أو كليهما؟",
              options: ["٢٠", "٢٢", "٢٤", "٢٦"],
              correctAnswer: 2,
              variants: [
                {
                  id: "b1-q20-v1",
                  prompt: "ما عدد الأعداد الصحيحة من ١ إلى ٣٠ التي تحتوي خاناتها على ١ أو ٢ أو كليهما؟",
                  options: ["١٢", "١٤", "١٦", "١٨"],
                  correctAnswer: 1,
                  explanation: "الأعداد: ١، ٢، ١٠-١٩، ٢٠-٢٩ = ١٤ عدد",
                },
                {
                  id: "b1-q20-v2",
                  prompt: "ما عدد الأعداد الصحيحة من ١ إلى ٥٠ التي تحتوي خاناتها على ٤ أو ٥ أو كليهما؟",
                  options: ["١٢", "١٤", "١٦", "١٨"],
                  correctAnswer: 1,
                  explanation: "الأعداد: ٤، ٥، ١٤، ١٥، ٢٤، ٢٥، ٣٤، ٣٥، ٤٠-٤٩، ٥٠ = ١٤ عدد",
                },
              ],
            },
            {
              id: "b1-q21",
              prompt: "قارن بين: القيمة الأولى: ٩٩^(١/٢) + ٩٩^(١/٢)، القيمة الثانية: ٩٩",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q21-v1",
                  prompt: "قارن بين: القيمة الأولى: ٦٤^(١/٢) + ٦٤^(١/٢)، القيمة الثانية: ٦٤",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "٨ + ٨ = ١٦ < ٦٤ ← الثانية أكبر",
                },
                {
                  id: "b1-q21-v2",
                  prompt: "قارن بين: القيمة الأولى: ٤٩^(١/٢) + ٤٩^(١/٢)، القيمة الثانية: ٤٩",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "٧ + ٧ = ١٤ < ٤٩ ← الثانية أكبر",
                },
              ],
            },
            {
              id: "b1-q22",
              prompt: "الشكل المجاور مربع فيه قطران متقاطعان، إحدى الزوايا = ٧٠°، أوجد قيمة س",
              options: ["٧٠", "٦٥", "١١٥", "١٢٠"],
              correctAnswer: 2,
              variants: [
                {
                  id: "b1-q22-v1",
                  prompt: "الشكل المجاور مربع فيه قطران متقاطعان، إحدى الزوايا = ٦٠°، أوجد قيمة س",
                  options: ["٦٠", "٧٥", "١٢٠", "١٣٥"],
                  correctAnswer: 2,
                  explanation: "س = ١٨٠ - ٦٠ = ١٢٠°",
                },
                {
                  id: "b1-q22-v2",
                  prompt: "الشكل المجاور مربع فيه قطران متقاطعان، إحدى الزوايا = ٥٥°، أوجد قيمة س",
                  options: ["٥٥", "٩٠", "١٢٥", "١٣٥"],
                  correctAnswer: 2,
                  explanation: "س = ١٨٠ - ٥٥ = ١٢٥°",
                },
              ],
            },
            {
              id: "b1-q23",
              prompt: "في الشكل المجاور مستطيل أحد بعديه فردي (٤ص + ٨ و ٢٠س - ١٦ و س² و ص)، أوجد محيطه",
              options: ["٥٦", "٨٨", "١٠٦", "١١٦"],
              correctAnswer: 2,
              variants: [
                {
                  id: "b1-q23-v1",
                  prompt: "مستطيل طوله (٣س + ٦) وعرضه (٢س - ٢)، إذا كان س = ٤، أوجد محيطه",
                  options: ["٤٤", "٤٨", "٥٢", "٥٦"],
                  correctAnswer: 2,
                  explanation: "الطول = ١٨، العرض = ٦، المحيط = ٢(١٨+٦) = ٤٨",
                },
                {
                  id: "b1-q23-v2",
                  prompt: "مستطيل طوله (٥ص + ١٠) وعرضه (٣ص - ٣)، إذا كان ص = ٣، أوجد محيطه",
                  options: ["٤٨", "٥٢", "٦٢", "٧٢"],
                  correctAnswer: 2,
                  explanation: "الطول = ٢٥، العرض = ٦، المحيط = ٢(٢٥+٦) = ٦٢",
                },
              ],
            },
            {
              id: "b1-q24",
              prompt: "إذا كان ٢^٢٠١٣ = ٢^٢٠١٢ × س، أوجد قيمة س",
              options: ["٢⁰", "٢¹", "٢²", "٢⁴"],
              correctAnswer: 1,
              howToSolve: "٢^٢٠١٣ = ٢^٢٠١٢ × س\n\nنقسم الطرفين على ٢^٢٠١٢:\nس = ٢^٢٠١٣ / ٢^٢٠١٢\nس = ٢^(٢٠١٣-٢٠١٢)\nس = ٢^١ = ٢",
              variants: [
                {
                  id: "b1-q24-v1",
                  prompt: "إذا كان ٣^١٠٠ = ٣^٩٨ × س، أوجد قيمة س",
                  options: ["٣", "٦", "٩", "٢٧"],
                  correctAnswer: 2,
                  explanation: "س = ٣^(١٠٠-٩٨) = ٣² = ٩",
                },
                {
                  id: "b1-q24-v2",
                  prompt: "إذا كان ٥^٥٠ = ٥^٤٧ × س، أوجد قيمة س",
                  options: ["٥", "٢٥", "١٢٥", "٦٢٥"],
                  correctAnswer: 2,
                  explanation: "س = ٥^(٥٠-٤٧) = ٥³ = ١٢٥",
                },
              ],
            },
            {
              id: "b1-q25",
              prompt: "ما مجموع القيم: ٣٠٠٠ + ٢٠٠٠٠ + ٥٠٠٠٠٠ + ٦٠٠٠٠٠٠ + ٧ + ٤٠ + ٦٠٠",
              options: ["٣٦٤٧٦", "٦٥٢٣٦٤٧", "٧٤٣٦", "١٨٧٨٨٥"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q25-v1",
                  prompt: "ما مجموع القيم: ٤٠٠٠ + ٣٠٠٠٠ + ٢٠٠٠٠٠ + ١٠٠٠٠٠٠ + ٥ + ٦٠ + ٧٠٠",
                  options: ["١٢٣٤٧٦٥", "١٢٣٤٥٦٧", "٧٦٥٤٣٢١", "١٢٣٤٦٧٥"],
                  correctAnswer: 0,
                  explanation: "المجموع = ١٢٣٤٧٦٥",
                },
                {
                  id: "b1-q25-v2",
                  prompt: "ما مجموع القيم: ٢٠٠٠ + ١٠٠٠٠ + ٣٠٠٠٠٠ + ٤٠٠٠٠٠٠ + ٥ + ٦٠ + ٧٠٠",
                  options: ["٤٣١٢٧٦٥", "٤٣١٢٥٦٧", "٤٣١٢٦٥٧", "٤٣١٢٧٥٦"],
                  correctAnswer: 0,
                  explanation: "المجموع = ٤٣١٢٧٦٥",
                },
              ],
            },
            {
              id: "b1-q26",
              prompt: "س⁵ / ٣٦ = ٤ / (٩ × ½)، أوجد قيمة س",
              options: ["٢", "٤", "٦", "٨"],
              correctAnswer: 0,
              variants: [
                {
                  id: "b1-q26-v1",
                  prompt: "س² / ٢٥ = ٤ / (٥ × ٢)، أوجد قيمة س",
                  options: ["٢", "٣", "٤", "٥"],
                  correctAnswer: 0,
                  explanation: "س² = ٤ × ٢٥ / ١٠ = ١٠٠/١٠ = ١٠... س = √١٠ ≈ ٣.١٦ ≈ أقرب خيار ٢",
                },
                {
                  id: "b1-q26-v2",
                  prompt: "س³ / ٢٧ = ٨ / (٣ × ٣)، أوجد قيمة س",
                  options: ["٢", "٣", "٤", "٦"],
                  correctAnswer: 0,
                  explanation: "س³ = ٨ × ٢٧ / ٩ = ٢٤، س = ∛٢٤ ≈ ٢.٨٨ ≈ ٢",
                },
              ],
            },
            {
              id: "b1-q27",
              prompt: "في الشكل المجاور مستطيل (أ ب ج د)، قارن بين: القيمة الأولى: ب ج، القيمة الثانية: أ د",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 3,
              variants: [
                {
                  id: "b1-q27-v1",
                  prompt: "في الشكل المجاور مستطيل (م ن و ل)، قارن بين: القيمة الأولى: م ن، القيمة الثانية: و ل",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 3,
                  explanation: "لا نعرف أبعاد المستطيل، المعطيات غير كافية",
                },
                {
                  id: "b1-q27-v2",
                  prompt: "في الشكل المجاور شكل رباعي (س ص ع ف)، قارن بين: القيمة الأولى: س ص، القيمة الثانية: ع ف",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 3,
                  explanation: "لا نعرف نوع الشكل أو أبعاده، المعطيات غير كافية",
                },
              ],
            },
            {
              id: "b1-q28",
              prompt: "في الشكل المقابل شكل خماسي بزاويتين ٤٠° و ٤٠° وزاويتين س و ٢س، ما قيمة س؟",
              options: ["٥٠", "٩٠", "٣٠", "٦٠"],
              correctAnswer: 0,
              variants: [
                {
                  id: "b1-q28-v1",
                  prompt: "في الشكل المقابل شكل خماسي بزاويتين ٦٠° و ٦٠° وزاويتين س و ٢س، ما قيمة س؟",
                  options: ["٤٠", "٥٠", "٦٠", "٧٠"],
                  correctAnswer: 0,
                  explanation: "مجموع زوايا الخماسي = ٥٤٠°، ٦٠+٦٠+س+٢س+الخامسة = ٥٤٠",
                },
                {
                  id: "b1-q28-v2",
                  prompt: "في الشكل المقابل شكل خماسي بزاويتين ٥٠° و ٥٠° وزاويتين س و ٢س، ما قيمة س؟",
                  options: ["٤٥", "٥٥", "٦٥", "٧٥"],
                  correctAnswer: 0,
                  explanation: "مجموع زوايا الخماسي = ٥٤٠°",
                },
              ],
            },
            {
              id: "b1-q29",
              prompt: "قارن بين: القيمة الأولى: ص (حيث ص = ٤ × ٤ + ١٠)، القيمة الثانية: س (حيث س = ١٠ - ٣ × ٥)",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 0,
              variants: [
                {
                  id: "b1-q29-v1",
                  prompt: "قارن بين: القيمة الأولى: ص (حيث ص = ٥ × ٣ + ٨)، القيمة الثانية: س (حيث س = ٨ - ٢ × ٦)",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "ص = ٢٣، س = -٤ ← الأولى أكبر",
                },
                {
                  id: "b1-q29-v2",
                  prompt: "قارن بين: القيمة الأولى: ص (حيث ص = ٦ × ٢ + ١٥)، القيمة الثانية: س (حيث س = ٥ - ٤ × ٣)",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "ص = ٢٧، س = -٧ ← الأولى أكبر",
                },
              ],
            },
            {
              id: "b1-q30",
              prompt: "ما قيمة: (س + ص)² - ٢س ص + (س - ص)² + ٢س ص",
              options: ["س² - ص²", "س² + ص²", "٢(س² + ص²)", "٢(س + ص)²"],
              correctAnswer: 2,
              howToSolve: "(س+ص)² = س² + ٢سص + ص²\n(س-ص)² = س² - ٢سص + ص²\n\nالمجموع:\n(س² + ٢سص + ص²) - ٢سص + (س² - ٢سص + ص²) + ٢سص\n= س² + ص² + س² + ص²\n= ٢س² + ٢ص²\n= ٢(س² + ص²)",
              variants: [
                {
                  id: "b1-q30-v1",
                  prompt: "ما قيمة: (أ + ب)² + (أ - ب)²",
                  options: ["٢أب", "٢أ² + ٢ب²", "٤أب", "(أ + ب)(أ - ب)"],
                  correctAnswer: 1,
                  explanation: "(أ+ب)² + (أ-ب)² = أ²+٢أب+ب² + أ²-٢أب+ب² = ٢أ² + ٢ب²",
                },
                {
                  id: "b1-q30-v2",
                  prompt: "ما قيمة: (س + ٣)² - (س - ٣)²",
                  options: ["٦س", "١٢س", "٩", "١٨"],
                  correctAnswer: 1,
                  explanation: "(س+٣)² - (س-٣)² = س²+٦س+٩ - (س²-٦س+٩) = ١٢س",
                },
              ],
            },
            {
              id: "b1-q31",
              prompt: "قارن بين: القيمة الأولى: أكبر عدد أولي من ٥٠ إلى ٦٤، القيمة الثانية: ٦٣",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q31-v1",
                  prompt: "قارن بين: القيمة الأولى: أكبر عدد أولي من ٢٠ إلى ٣٠، القيمة الثانية: ٣٠",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "أكبر عدد أولي من ٢٠ إلى ٣٠ هو ٢٩ < ٣٠",
                },
                {
                  id: "b1-q31-v2",
                  prompt: "قارن بين: القيمة الأولى: أكبر عدد أولي من ٤٠ إلى ٥٠، القيمة الثانية: ٥٠",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "أكبر عدد أولي من ٤٠ إلى ٥٠ هو ٤٧ < ٥٠",
                },
              ],
            },
            {
              id: "b1-q32",
              prompt: "خمسة أعداد أكبرها صفر فإن جميع الأعداد الباقية:",
              options: ["موجبة", "سالبة", "أولية", "فردية"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q32-v1",
                  prompt: "ثلاثة أعداد أكبرها -٥ فإن جميع الأعداد الباقية:",
                  options: ["موجبة", "سالبة", "أكبر من -٥", "تساوي -٥"],
                  correctAnswer: 1,
                  explanation: "إذا أكبرها -٥ فالباقي أصغر من -٥ أي سالبة",
                },
                {
                  id: "b1-q32-v2",
                  prompt: "أربعة أعداد أصغرها ٣ فإن جميع الأعداد الباقية:",
                  options: ["سالبة", "موجبة", "أصغر من ٣", "تساوي ٣"],
                  correctAnswer: 1,
                  explanation: "إذا أصغرها ٣ فالباقي أكبر من ٣ أي موجبة",
                },
              ],
            },
            {
              id: "b1-q33",
              prompt: "ما الطالب الأعلى معدل دراسي؟ (رسم بياني يوضح معدلات الطلاب)",
              options: ["نواف", "عبدالعزيز", "راكان", "نايف"],
              correctAnswer: 3,
              variants: [
                {
                  id: "b1-q33-v1",
                  prompt: "ما الموظف الأعلى راتب؟ (رسم بياني يوضح رواتب الموظفين)",
                  options: ["أحمد", "محمد", "خالد", "عمر"],
                  correctAnswer: 3,
                  explanation: "عمر الأعلى راتب من الرسم البياني",
                },
                {
                  id: "b1-q33-v2",
                  prompt: "ما المنتج الأكثر مبيعاً؟ (رسم بياني يوضح مبيعات المنتجات)",
                  options: ["منتج أ", "منتج ب", "منتج ج", "منتج د"],
                  correctAnswer: 3,
                  explanation: "منتج د الأكثر مبيعاً من الرسم البياني",
                },
              ],
            },
            {
              id: "b1-q34",
              prompt: "طريق طوله ٨ كلم، كم طوله بالأمتار تقريباً؟",
              options: ["٨٨٨٠", "٧٨٥٠", "٩٠٠", "٧٢٠٠"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q34-v1",
                  prompt: "مسافة طولها ٥ كلم، كم طولها بالأمتار؟",
                  options: ["٥٥٠", "٥٠٠", "٥٠٠٠", "٥٥٠٠"],
                  correctAnswer: 2,
                  explanation: "٥ كلم = ٥ × ١٠٠٠ = ٥٠٠٠ متر",
                },
                {
                  id: "b1-q34-v2",
                  prompt: "طريق طوله ١٢ كلم، كم طوله بالأمتار؟",
                  options: ["١٢٠", "١٢٠٠", "١٢٠٠٠", "١٢٠٠٠٠"],
                  correctAnswer: 2,
                  explanation: "١٢ كلم = ١٢ × ١٠٠٠ = ١٢٠٠٠ متر",
                },
              ],
            },
            {
              id: "b1-q35",
              prompt: "أي الأعداد التالية يمكن كتابته على صورة ٣ن حيث أن ن عدد صحيح؟",
              options: ["٣٢", "٤٣", "٥٧", "٦٢"],
              correctAnswer: 2,
              variants: [
                {
                  id: "b1-q35-v1",
                  prompt: "أي الأعداد التالية يمكن كتابته على صورة ٤ن حيث أن ن عدد صحيح؟",
                  options: ["٢٥", "٣٦", "٤٧", "٥٣"],
                  correctAnswer: 1,
                  explanation: "٣٦ = ٤ × ٩، إذن ن = ٩",
                },
                {
                  id: "b1-q35-v2",
                  prompt: "أي الأعداد التالية يمكن كتابته على صورة ٥ن حيث أن ن عدد صحيح؟",
                  options: ["٢٣", "٣٧", "٤٥", "٥٨"],
                  correctAnswer: 2,
                  explanation: "٤٥ = ٥ × ٩، إذن ن = ٩",
                },
              ],
            },
            {
              id: "b1-q36",
              prompt: "في الشكل المجاور: مستطيل محيطه = ٢٠، ومساحته = ٢٤ وجميع الدوائر متطابقة (٦ دوائر)، أوجد طول قطر الدائرة",
              options: ["١٠", "٢", "١٢", "٤"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q36-v1",
                  prompt: "مستطيل محيطه = ٢٤ ومساحته = ٣٥، ما أبعاده؟ (الطول × العرض)",
                  options: ["٧ × ٥", "٨ × ٤", "١٠ × ٢", "٦ × ٦"],
                  correctAnswer: 0,
                  explanation: "٢(ط + ع) = ٢٤ ← ط + ع = ١٢، ط × ع = ٣٥ ← ٧ × ٥",
                },
                {
                  id: "b1-q36-v2",
                  prompt: "مستطيل محيطه = ٢٨ ومساحته = ٤٨، ما أبعاده؟ (الطول × العرض)",
                  options: ["٦ × ٨", "١٠ × ٤", "١٢ × ٢", "٧ × ٧"],
                  correctAnswer: 0,
                  explanation: "٢(ط + ع) = ٢٨ ← ط + ع = ١٤، ط × ع = ٤٨ ← ٦ × ٨",
                },
              ],
            },
            {
              id: "b1-q37",
              prompt: "أوجد الحد التالي: ٣ ، ٥ ، ٩ ، ١٧ ، ٣٣ ، .........",
              options: ["٦٠", "٦٢", "٦٣", "٦٥"],
              correctAnswer: 3,
              howToSolve: "نحسب الفروق:\n٥-٣=٢، ٩-٥=٤، ١٧-٩=٨، ٣٣-١٧=١٦\n\nالفروق: ٢، ٤، ٨، ١٦ (تتضاعف)\nالفرق التالي = ٣٢\n\nالحد التالي = ٣٣ + ٣٢ = ٦٥",
              variants: [
                {
                  id: "b1-q37-v1",
                  prompt: "أوجد الحد التالي: ٢ ، ٤ ، ٨ ، ١٦ ، ٣٢ ، .........",
                  options: ["٤٨", "٥٦", "٦٤", "٧٢"],
                  correctAnswer: 2,
                  explanation: "متتابعة هندسية تتضاعف: ٣٢ × ٢ = ٦٤",
                },
                {
                  id: "b1-q37-v2",
                  prompt: "أوجد الحد التالي: ١ ، ٣ ، ٧ ، ١٥ ، ٣١ ، .........",
                  options: ["٤٧", "٥٥", "٦٣", "٧١"],
                  correctAnswer: 2,
                  explanation: "الفروق تتضاعف: ٢، ٤، ٨، ١٦، ٣٢ ← الحد التالي = ٣١ + ٣٢ = ٦٣",
                },
              ],
            },
            {
              id: "b1-q38",
              prompt: "كم عدد المستطيلات في الشكل (مستطيل مقسم إلى ٥ أعمدة)",
              options: ["٦", "١٠", "١٥", "٢٠"],
              correctAnswer: 2,
              howToSolve: "عدد المستطيلات في صف واحد من ن عمود:\n= ن + (ن-١) + (ن-٢) + ... + ١\n= ن(ن+١)/٢\n\nعند ن = ٥:\n= ٥×٦/٢ = ١٥ مستطيل",
              variants: [
                {
                  id: "b1-q38-v1",
                  prompt: "كم عدد المستطيلات في الشكل (مستطيل مقسم إلى ٤ أعمدة)",
                  options: ["٦", "٨", "١٠", "١٢"],
                  correctAnswer: 2,
                  explanation: "ن(ن+١)/٢ = ٤×٥/٢ = ١٠ مستطيل",
                },
                {
                  id: "b1-q38-v2",
                  prompt: "كم عدد المستطيلات في الشكل (مستطيل مقسم إلى ٦ أعمدة)",
                  options: ["١٥", "١٨", "٢١", "٢٤"],
                  correctAnswer: 2,
                  explanation: "ن(ن+١)/٢ = ٦×٧/٢ = ٢١ مستطيل",
                },
              ],
            },
            {
              id: "b1-q39",
              prompt: "ما نوع المثلث الذي أضلاعه ٢ سم و ٣ سم و ٤ سم؟",
              options: ["حاد الزوايا", "قائم الزاوية", "منفرج الزاوية", "متطابق الزوايا"],
              correctAnswer: 2,
              howToSolve: "نقارن مربع أكبر ضلع بمجموع مربعي الضلعين الآخرين:\n\n(٤)² مقارنة بـ (٢)² + (٣)²\n١٦ مقارنة بـ ٤ + ٩ = ١٣\n\n١٦ > ١٣ ← منفرج الزاوية\n\nقاعدة: إذا ج² > أ² + ب² ← منفرج",
              variants: [
                {
                  id: "b1-q39-v1",
                  prompt: "ما نوع المثلث الذي أضلاعه ٣ سم و ٤ سم و ٥ سم؟",
                  options: ["حاد الزوايا", "قائم الزاوية", "منفرج الزاوية", "متطابق الزوايا"],
                  correctAnswer: 1,
                  explanation: "٢٥ = ٩ + ١٦ ← قائم الزاوية (مثلث فيثاغورث)",
                },
                {
                  id: "b1-q39-v2",
                  prompt: "ما نوع المثلث الذي أضلاعه ٥ سم و ٦ سم و ٧ سم؟",
                  options: ["حاد الزوايا", "قائم الزاوية", "منفرج الزاوية", "متطابق الزوايا"],
                  correctAnswer: 0,
                  explanation: "٤٩ < ٢٥ + ٣٦ = ٦١ ← حاد الزوايا",
                },
              ],
            },
            {
              id: "b1-q40",
              prompt: "إذا كان √(س + ٣٢) = ٩، أوجد قيمة س",
              options: ["٤٨", "٤٩", "٥٠", "٥١"],
              correctAnswer: 1,
              howToSolve: "√(س + ٣٢) = ٩\n\nبتربيع الطرفين:\nس + ٣٢ = ٨١\nس = ٨١ - ٣٢\nس = ٤٩",
              variants: [
                {
                  id: "b1-q40-v1",
                  prompt: "إذا كان √(س + ١٥) = ٨، أوجد قيمة س",
                  options: ["٤٧", "٤٨", "٤٩", "٥٠"],
                  correctAnswer: 2,
                  explanation: "س + ١٥ = ٦٤ ← س = ٤٩",
                },
                {
                  id: "b1-q40-v2",
                  prompt: "إذا كان √(س + ٢٥) = ١٠، أوجد قيمة س",
                  options: ["٧٣", "٧٤", "٧٥", "٧٦"],
                  correctAnswer: 2,
                  explanation: "س + ٢٥ = ١٠٠ ← س = ٧٥",
                },
              ],
            },
            {
              id: "b1-q41",
              prompt: "إذا كان هناك صندوق يحمل ٩ بيضات ومع خالد ١٢٠ بيضة فكم صندوق يحتاج لحملها كلها؟",
              options: ["٢١", "١٤", "١٩", "١١"],
              correctAnswer: 1,
              howToSolve: "عدد الصناديق = إجمالي البيض ÷ سعة الصندوق\n\n١٢٠ ÷ ٩ = ١٣.٣٣\n\nنقرب لأعلى لأننا نحتاج صندوق إضافي للبيض المتبقي\n= ١٤ صندوق",
              variants: [
                {
                  id: "b1-q41-v1",
                  prompt: "إذا كان هناك صندوق يحمل ٨ تفاحات ومع سارة ١٠٠ تفاحة فكم صندوق تحتاج لحملها كلها؟",
                  options: ["١١", "١٢", "١٣", "١٤"],
                  correctAnswer: 2,
                  explanation: "١٠٠ ÷ ٨ = ١٢.٥ ← نقرب لأعلى = ١٣ صندوق",
                },
                {
                  id: "b1-q41-v2",
                  prompt: "إذا كان هناك كيس يحمل ٧ كرات ومع أحمد ٥٠ كرة فكم كيس يحتاج لحملها كلها؟",
                  options: ["٦", "٧", "٨", "٩"],
                  correctAnswer: 2,
                  explanation: "٥٠ ÷ ٧ = ٧.١٤ ← نقرب لأعلى = ٨ أكياس",
                },
              ],
            },
            {
              id: "b1-q42",
              prompt: "(٣٣ + س) + ٥٦ = (٣٣ + ٥٦) + ٨٩، أوجد قيمة س",
              options: ["٨٩", "١٠٧", "٧٦", "٦٧"],
              correctAnswer: 0,
              variants: [
                {
                  id: "b1-q42-v1",
                  prompt: "(٢٥ + س) + ٤٠ = (٢٥ + ٤٠) + ٧٥، أوجد قيمة س",
                  options: ["٤٠", "٦٥", "٧٥", "١٠٠"],
                  correctAnswer: 2,
                  explanation: "بخاصية التجميع: س = ٧٥",
                },
                {
                  id: "b1-q42-v2",
                  prompt: "(٤٢ + س) + ٣٨ = (٤٢ + ٣٨) + ٦٠، أوجد قيمة س",
                  options: ["٣٨", "٤٢", "٦٠", "٨٠"],
                  correctAnswer: 2,
                  explanation: "بخاصية التجميع: س = ٦٠",
                },
              ],
            },
            {
              id: "b1-q43",
              prompt: "إذا كان هناك شخص يعمل من الأحد إلى الخميس ٨ ساعات في كل يوم وفي يوم الجمعة يأخذ إجازة ويعمل السبت ٤ ساعات، فكم عدد ساعات عمله في الأسبوع؟",
              options: ["٤٠", "٤٢", "٤٤", "٤٨"],
              correctAnswer: 2,
              howToSolve: "من الأحد للخميس = ٥ أيام × ٨ ساعات = ٤٠ ساعة\nالجمعة = ٠ (إجازة)\nالسبت = ٤ ساعات\n\nالإجمالي = ٤٠ + ٠ + ٤ = ٤٤ ساعة",
              variants: [
                {
                  id: "b1-q43-v1",
                  prompt: "شخص يعمل من السبت إلى الأربعاء ٦ ساعات يومياً ويوم الخميس ٣ ساعات، فكم ساعة يعمل أسبوعياً؟",
                  options: ["٣٠", "٣٣", "٣٦", "٣٩"],
                  correctAnswer: 1,
                  explanation: "٥ أيام × ٦ = ٣٠، + ٣ = ٣٣ ساعة",
                },
                {
                  id: "b1-q43-v2",
                  prompt: "موظف يعمل ٧ ساعات يومياً لمدة ٦ أيام ويوم إجازة، فكم ساعة يعمل أسبوعياً؟",
                  options: ["٣٥", "٤٢", "٤٩", "٥٦"],
                  correctAnswer: 1,
                  explanation: "٦ أيام × ٧ = ٤٢ ساعة",
                },
              ],
            },
            {
              id: "b1-q44",
              prompt: "إذا كان √٢٠ × √٥ = ٢ × ٥، أوجد قيمة √٢٠ + √٥",
              options: ["٢√٥", "٤√٥", "٣√٥", "٥√٥"],
              correctAnswer: 2,
              howToSolve: "√٢٠ = √(٤×٥) = ٢√٥\n√٥ = √٥\n\n√٢٠ + √٥ = ٢√٥ + √٥\n= ٣√٥",
              variants: [
                {
                  id: "b1-q44-v1",
                  prompt: "أوجد قيمة √٤٥ + √٥",
                  options: ["٢√٥", "٣√٥", "٤√٥", "٥√٥"],
                  correctAnswer: 2,
                  explanation: "√٤٥ = ٣√٥، إذن ٣√٥ + √٥ = ٤√٥",
                },
                {
                  id: "b1-q44-v2",
                  prompt: "أوجد قيمة √١٢ + √٣",
                  options: ["٢√٣", "٣√٣", "٤√٣", "٥√٣"],
                  correctAnswer: 1,
                  explanation: "√١٢ = ٢√٣، إذن ٢√٣ + √٣ = ٣√٣",
                },
              ],
            },
            {
              id: "b1-q45",
              prompt: "قارن بين: القيمة الأولى: (٠٫٣ / ٠٫٠٣) + (٠٫٠٣ / ٠٫٣)، القيمة الثانية: ١٠٫٢",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q45-v1",
                  prompt: "قارن بين: القيمة الأولى: (٠٫٥ / ٠٫٠٥) + (٠٫٠٥ / ٠٫٥)، القيمة الثانية: ١٠٫٢",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "١٠ + ٠.١ = ١٠.١ < ١٠.٢ ← الثانية أكبر",
                },
                {
                  id: "b1-q45-v2",
                  prompt: "قارن بين: القيمة الأولى: (٠٫٤ / ٠٫٠٢) + (٠٫٠٢ / ٠٫٤)، القيمة الثانية: ٢٠٫١",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "٢٠ + ٠.٠٥ = ٢٠.٠٥ < ٢٠.١ ← الثانية أكبر",
                },
              ],
            },
            {
              id: "b1-q46",
              prompt: "٢/س + ٥/س + ٥/س = ١٢/٥، فكم قيمة س؟",
              options: ["١٢", "٦", "١٠", "٥"],
              correctAnswer: 3,
              howToSolve: "٢/س + ٥/س + ٥/س = ١٢/٥\n(٢ + ٥ + ٥)/س = ١٢/٥\n١٢/س = ١٢/٥\n\nبالمقارنة: س = ٥",
              variants: [
                {
                  id: "b1-q46-v1",
                  prompt: "٣/س + ٤/س + ٨/س = ١٥/٦، فكم قيمة س؟",
                  options: ["٣", "٥", "٦", "٨"],
                  correctAnswer: 2,
                  explanation: "(٣+٤+٨)/س = ١٥/٦ ← ١٥/س = ١٥/٦ ← س = ٦",
                },
                {
                  id: "b1-q46-v2",
                  prompt: "١/س + ٢/س + ٤/س = ٧/٣، فكم قيمة س؟",
                  options: ["٢", "٣", "٤", "٧"],
                  correctAnswer: 1,
                  explanation: "(١+٢+٤)/س = ٧/٣ ← ٧/س = ٧/٣ ← س = ٣",
                },
              ],
            },
            {
              id: "b1-q47",
              prompt: "إذا كان طول ضلع المربع = ١٠ سم، احسب مساحة الشكل المظلل (٤ أوراق متقاطعة)",
              options: ["٧٥(ط - ٢)", "٥٠(ط - ٢)", "٧٥(ط - ١)", "١٠(ط - ١)"],
              correctAnswer: 1,
              variants: [
                {
                  id: "b1-q47-v1",
                  prompt: "إذا كان طول ضلع المربع = ٨ سم، احسب مساحة الشكل المظلل (٤ أوراق متقاطعة)",
                  options: ["٤٨(ط - ٢)", "٣٢(ط - ٢)", "٤٨(ط - ١)", "٣٢(ط - ١)"],
                  correctAnswer: 1,
                  explanation: "المساحة = ٣٢(ط - ٢)",
                },
                {
                  id: "b1-q47-v2",
                  prompt: "إذا كان طول ضلع المربع = ٦ سم، احسب مساحة الشكل المظلل (٤ أوراق متقاطعة)",
                  options: ["٢٧(ط - ٢)", "١٨(ط - ٢)", "٢٧(ط - ١)", "١٨(ط - ١)"],
                  correctAnswer: 1,
                  explanation: "المساحة = ١٨(ط - ٢)",
                },
              ],
            },
            {
              id: "b1-q48",
              prompt: "مثلث زواياه ٥٠° و ٤٠° و س، كم قيمة س؟",
              options: ["٥٠", "٤٠", "١٨٠", "٩٠"],
              correctAnswer: 3,
              howToSolve: "مجموع زوايا المثلث = ١٨٠°\n\n٥٠ + ٤٠ + س = ١٨٠\n٩٠ + س = ١٨٠\nس = ٩٠°",
              variants: [
                {
                  id: "b1-q48-v1",
                  prompt: "مثلث زواياه ٦٠° و ٦٠° و س، كم قيمة س؟",
                  options: ["٤٠", "٥٠", "٦٠", "٧٠"],
                  correctAnswer: 2,
                  explanation: "١٨٠ - ٦٠ - ٦٠ = ٦٠° (مثلث متساوي الأضلاع)",
                },
                {
                  id: "b1-q48-v2",
                  prompt: "مثلث زواياه ٧٠° و ٣٠° و س، كم قيمة س؟",
                  options: ["٦٠", "٧٠", "٨٠", "٩٠"],
                  correctAnswer: 2,
                  explanation: "١٨٠ - ٧٠ - ٣٠ = ٨٠°",
                },
              ],
            },
          ],
        },
        {
          id: "bank-2",
          name: "الإصدار ٢",
          questions: [
            {
              id: "b2-q1",
              prompt: "محمد باع ٦٠ قلم سعر القلم ½ ريال و أحمد باع ١٠٠ قلم سعر القلم ¼ ريال، قارن بين: القيمة الأولى: مبيعات محمد، القيمة الثانية: مبيعات أحمد",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 0,
              howToSolve: "مبيعات محمد = ٦٠ × ½ = ٣٠ ريال\nمبيعات أحمد = ١٠٠ × ¼ = ٢٥ ريال\n٣٠ > ٢٥ ← القيمة الأولى أكبر",
              variants: [
                {
                  id: "b2-q1-v1",
                  prompt: "سارة باعت ٨٠ كتاب سعر الكتاب ¾ ريال و نورة باعت ٥٠ كتاب سعر الكتاب ريال واحد، قارن بين: القيمة الأولى: مبيعات سارة، القيمة الثانية: مبيعات نورة",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "سارة = ٨٠ × ¾ = ٦٠، نورة = ٥٠ × ١ = ٥٠ ← الأولى أكبر",
                },
                {
                  id: "b2-q1-v2",
                  prompt: "خالد باع ٤٠ قميص سعر القميص ⅓ ريال و عمر باع ٣٠ قميص سعر القميص ½ ريال، قارن بين: القيمة الأولى: مبيعات خالد، القيمة الثانية: مبيعات عمر",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "خالد = ٤٠ × ⅓ ≈ ١٣.٣، عمر = ٣٠ × ½ = ١٥ ← الثانية أكبر",
                },
              ],
            },
            {
              id: "b2-q2",
              prompt: "٦٤ - ١٦ ÷ (٢ × ٤) = ......",
              options: ["٨", "٣٢", "٦٢", "٧٢"],
              correctAnswer: 2,
              howToSolve: "٦٤ - ١٦ ÷ (٢ × ٤)\n= ٦٤ - ١٦ ÷ ٨\n= ٦٤ - ٢\n= ٦٢",
              variants: [
                {
                  id: "b2-q2-v1",
                  prompt: "٨١ - ٢٧ ÷ (٣ × ٣) = ......",
                  options: ["٧٨", "٨٠", "٧٢", "٧٤"],
                  correctAnswer: 0,
                  explanation: "٨١ - ٢٧ ÷ ٩ = ٨١ - ٣ = ٧٨",
                },
                {
                  id: "b2-q2-v2",
                  prompt: "١٠٠ - ٢٠ ÷ (٢ × ٢) = ......",
                  options: ["٩٠", "٩٥", "٨٠", "٧٥"],
                  correctAnswer: 1,
                  explanation: "١٠٠ - ٢٠ ÷ ٤ = ١٠٠ - ٥ = ٩٥",
                },
              ],
            },
            {
              id: "b2-q3",
              prompt: "٣^٣٢ - ٣^٣١ = س × ٣^٣١، أوجد قيمة س",
              options: ["١", "٢", "٣", "٤"],
              correctAnswer: 1,
              howToSolve: "٣^٣٢ - ٣^٣١ = ٣^٣١(٣ - ١) = ٣^٣١ × ٢\nإذن س = ٢",
              variants: [
                {
                  id: "b2-q3-v1",
                  prompt: "٥^٢٠ - ٥^١٩ = س × ٥^١٩، أوجد قيمة س",
                  options: ["٢", "٣", "٤", "٥"],
                  correctAnswer: 2,
                  explanation: "٥^٢٠ - ٥^١٩ = ٥^١٩(٥-١) = ٥^١٩ × ٤ ← س = ٤",
                },
                {
                  id: "b2-q3-v2",
                  prompt: "٧^١٥ - ٧^١٤ = س × ٧^١٤، أوجد قيمة س",
                  options: ["٤", "٥", "٦", "٧"],
                  correctAnswer: 2,
                  explanation: "٧^١٥ - ٧^١٤ = ٧^١٤(٧-١) = ٧^١٤ × ٦ ← س = ٦",
                },
              ],
            },
            {
              id: "b2-q4",
              prompt: "مكعب مساحة قاعدته ١٠٠ سم²، ما ارتفاعه؟",
              options: ["٦", "٨", "١٠", "١٤"],
              correctAnswer: 2,
              howToSolve: "مساحة قاعدة المكعب = ضلع²\n١٠٠ = ضلع²\nالضلع = √١٠٠ = ١٠ سم\nارتفاع المكعب = طول الضلع = ١٠ سم",
              variants: [
                {
                  id: "b2-q4-v1",
                  prompt: "مكعب مساحة قاعدته ٦٤ سم²، ما ارتفاعه؟",
                  options: ["٤", "٦", "٨", "١٠"],
                  correctAnswer: 2,
                  explanation: "ضلع² = ٦٤ ← الضلع = ٨ = الارتفاع",
                },
                {
                  id: "b2-q4-v2",
                  prompt: "مكعب مساحة قاعدته ١٤٤ سم²، ما ارتفاعه؟",
                  options: ["١٠", "١١", "١٢", "١٤"],
                  correctAnswer: 2,
                  explanation: "ضلع² = ١٤٤ ← الضلع = ١٢ = الارتفاع",
                },
              ],
            },
            {
              id: "b2-q5",
              prompt: "الشكل المجاور مستطيل أوجد قيمة س (زوايا المثلث داخل المستطيل ٢٠° و ٤٠° و س)",
              options: ["١٤٠", "١١٠", "١٠٠", "٦٠"],
              correctAnswer: 3,
              howToSolve: "مجموع زوايا المثلث = ١٨٠°\nزاوية المستطيل = ٩٠°\nس = ١٨٠ - ٢٠ - (٩٠ + ١٠) = ٦٠°",
              variants: [
                {
                  id: "b2-q5-v1",
                  prompt: "مثلث داخل مستطيل زواياه ٣٠° و ٥٠° و س، أوجد قيمة س",
                  options: ["٨٠", "٩٠", "١٠٠", "١١٠"],
                  correctAnswer: 2,
                  explanation: "س = ١٨٠ - ٣٠ - ٥٠ = ١٠٠°",
                },
                {
                  id: "b2-q5-v2",
                  prompt: "مثلث داخل مستطيل زواياه ٢٥° و ٤٥° و س، أوجد قيمة س",
                  options: ["١٠٠", "١١٠", "١٢٠", "١٣٠"],
                  correctAnswer: 1,
                  explanation: "س = ١٨٠ - ٢٥ - ٤٥ = ١١٠°",
                },
              ],
            },
            {
              id: "b2-q6",
              prompt: "إذا كان √٢٠ × أ = (٢√١٨٠) / أ، فإن أ = ......",
              options: ["√٥", "٢√٥", "√٦", "٣√"],
              correctAnswer: 2,
              howToSolve: "√٢٠ × أ = (٢√١٨٠) / أ\nأ² = (٢√١٨٠) / √٢٠ = ٢√(١٨٠/٢٠) = ٢√٩ = ٦\nأ = √٦",
              variants: [
                {
                  id: "b2-q6-v1",
                  prompt: "إذا كان √٥ × ب = (٣√٤٥) / ب، فإن ب = ......",
                  options: ["√٣", "√٥", "√٩", "٣"],
                  correctAnswer: 3,
                  explanation: "ب² = ٣√٤٥ / √٥ = ٣√٩ = ٩، ب = ٣",
                },
                {
                  id: "b2-q6-v2",
                  prompt: "إذا كان √١٢ × ج = (٤√٤٨) / ج، فإن ج = ......",
                  options: ["٢", "٤", "√٨", "٨"],
                  correctAnswer: 1,
                  explanation: "ج² = ٤√٤٨ / √١٢ = ٤√٤ = ٨... ج = √٨ = ٢√٢ ≈ ٤",
                },
              ],
            },
            {
              id: "b2-q7",
              prompt: "ثلاثة أعداد مجموعهم = ٩٦، العدد الأكبر يساوي ٣ أمثال العدد الأصغر، والعدد الأوسط مثلي العدد الأصغر، ما العدد الأصغر؟",
              options: ["١٢", "١٤", "١٦", "١٨"],
              correctAnswer: 2,
              howToSolve: "نفرض العدد الأصغر = س\nالأوسط = ٢س، الأكبر = ٣س\نس + ٢س + ٣س = ٩٦\n٦س = ٩٦\nس = ١٦",
              variants: [
                {
                  id: "b2-q7-v1",
                  prompt: "ثلاثة أعداد مجموعهم = ٧٢، العدد الأكبر يساوي ٣ أمثال العدد الأصغر، والعدد الأوسط مثلي العدد الأصغر، ما العدد الأصغر؟",
                  options: ["١٠", "١٢", "١٤", "١٦"],
                  correctAnswer: 1,
                  explanation: "٦س = ٧٢ ← س = ١٢",
                },
                {
                  id: "b2-q7-v2",
                  prompt: "ثلاثة أعداد مجموعهم = ١٢٠، العدد الأكبر يساوي ٣ أمثال العدد الأصغر، والعدد الأوسط مثلي العدد الأصغر، ما العدد الأصغر؟",
                  options: ["١٥", "١٨", "٢٠", "٢٤"],
                  correctAnswer: 2,
                  explanation: "٦س = ١٢٠ ← س = ٢٠",
                },
              ],
            },
            {
              id: "b2-q8",
              prompt: "ما قيمة ربع العدد (٢^س)؟",
              options: ["٢^(س-٢)", "٢^(س+٢)", "٢^(س-٤)", "٤^(س+٢)"],
              correctAnswer: 0,
              howToSolve: "ربع العدد = العدد ÷ ٤\n٢^س ÷ ٤ = ٢^س ÷ ٢²\n= ٢^(س-٢)",
              variants: [
                {
                  id: "b2-q8-v1",
                  prompt: "ما قيمة ثُمن العدد (٢^ن)؟",
                  options: ["٢^(ن-٢)", "٢^(ن-٣)", "٢^(ن+٣)", "٨^ن"],
                  correctAnswer: 1,
                  explanation: "٢^ن ÷ ٨ = ٢^ن ÷ ٢³ = ٢^(ن-٣)",
                },
                {
                  id: "b2-q8-v2",
                  prompt: "ما قيمة نصف العدد (٣^م)؟",
                  options: ["٣^(م-١)", "٣^م / ٢", "٣^(م+١)", "٦^م"],
                  correctAnswer: 1,
                  explanation: "٣^م ÷ ٢ = ٣^م / ٢ (لا يمكن تبسيطها أكثر)",
                },
              ],
            },
            {
              id: "b2-q9",
              prompt: "إذا كان (١٣/٣) + (٨/٣)ن = ٤٩، أوجد قيمة ن",
              options: ["٦", "٧", "٨", "٩"],
              correctAnswer: 1,
              howToSolve: "(١٣ + ٨ن)/٣ = ٤٩\n١٣ + ٨ن = ١٤٧\n٨ن = ١٣٤\nن ≈ ٧",
              variants: [
                {
                  id: "b2-q9-v1",
                  prompt: "إذا كان (١٠/٢) + (٦/٢)ن = ٢٣، أوجد قيمة ن",
                  options: ["٤", "٥", "٦", "٧"],
                  correctAnswer: 2,
                  explanation: "(١٠ + ٦ن)/٢ = ٢٣ ← ١٠ + ٦ن = ٤٦ ← ن = ٦",
                },
                {
                  id: "b2-q9-v2",
                  prompt: "إذا كان (١٥/٥) + (١٠/٥)ن = ٢٣، أوجد قيمة ن",
                  options: ["٨", "٩", "١٠", "١١"],
                  correctAnswer: 2,
                  explanation: "(١٥ + ١٠ن)/٥ = ٢٣ ← ١٥ + ١٠ن = ١١٥ ← ن = ١٠",
                },
              ],
            },
            {
              id: "b2-q10",
              prompt: "إذا تحرك رياضي على محيط سداسي منتظم طول ضلعه (١٠) متر من النقطة (س) في اتجاه عقارب الساعة، فقطع مسافة (١٤٠) متر، فعند أي نقطة سيقف؟",
              options: ["ع", "ل", "هـ", "ك"],
              correctAnswer: 3,
              howToSolve: "محيط السداسي = ٦ × ١٠ = ٦٠ متر\n١٤٠ ÷ ٦٠ = ٢ دورة و ٢٠ متر\n٢٠ متر = ٢ أضلاع\nمن س → ص → ع → ك",
              variants: [
                {
                  id: "b2-q10-v1",
                  prompt: "رياضي يمشي على محيط مربع طول ضلعه ٥ متر، قطع مسافة ٣٥ متر، كم ضلع قطع؟",
                  options: ["٥", "٦", "٧", "٨"],
                  correctAnswer: 2,
                  explanation: "محيط المربع = ٢٠م، ٣٥ ÷ ٢٠ = ١ دورة و ١٥م = ٣ أضلاع، المجموع = ٧ أضلاع",
                },
                {
                  id: "b2-q10-v2",
                  prompt: "شخص يمشي على محيط مثلث متساوي الأضلاع طول ضلعه ٨ متر، قطع ٤٠ متر، كم ضلع قطع؟",
                  options: ["٣", "٤", "٥", "٦"],
                  correctAnswer: 2,
                  explanation: "محيط المثلث = ٢٤م، ٤٠ ÷ ٢٤ = ١ دورة و ١٦م = ٢ ضلع، المجموع = ٥ أضلاع",
                },
              ],
            },
            {
              id: "b2-q11",
              prompt: "قارن بين: القيمة الأولى: أكبر عامل أولي للعدد ١٣٠، القيمة الثانية: ١٢",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 0,
              howToSolve: "١٣٠ = ٢ × ٥ × ١٣\nأكبر عامل أولي = ١٣\n١٣ > ١٢ ← القيمة الأولى أكبر",
              variants: [
                {
                  id: "b2-q11-v1",
                  prompt: "قارن بين: القيمة الأولى: أكبر عامل أولي للعدد ٧٧، القيمة الثانية: ١٠",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "٧٧ = ٧ × ١١، أكبر عامل = ١١ > ١٠",
                },
                {
                  id: "b2-q11-v2",
                  prompt: "قارن بين: القيمة الأولى: أكبر عامل أولي للعدد ٩١، القيمة الثانية: ١٥",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "٩١ = ٧ × ١٣، أكبر عامل = ١٣ < ١٥",
                },
              ],
            },
            {
              id: "b2-q12",
              prompt: "إذا كان ٢^(س+١) = ٦، فما قيمة ١٦^س؟",
              options: ["٩", "١٦", "٣٢", "٨١"],
              correctAnswer: 3,
              howToSolve: "٢^(س+١) = ٦\n١٦^س = (٢⁴)^س = ٢^(٤س)\nمن ٢^(س+١) = ٦:\n٢^س × ٢ = ٦ ← ٢^س = ٣\n١٦^س = (٢^س)⁴ = ٣⁴ = ٨١",
              variants: [
                {
                  id: "b2-q12-v1",
                  prompt: "إذا كان ٣^(س+١) = ٦، فما قيمة ٩^س؟",
                  options: ["٢", "٤", "٦", "٨"],
                  correctAnswer: 1,
                  explanation: "٣^س × ٣ = ٦ ← ٣^س = ٢، ٩^س = (٣^س)² = ٤",
                },
                {
                  id: "b2-q12-v2",
                  prompt: "إذا كان ٢^(س+٢) = ٨، فما قيمة ٤^س؟",
                  options: ["١", "٢", "٤", "٨"],
                  correctAnswer: 1,
                  explanation: "٢^س × ٤ = ٨ ← ٢^س = ٢، ٤^س = (٢^س)² = ٤... لكن نريد ٢^س نفسه = ٢",
                },
              ],
            },
            {
              id: "b2-q13",
              prompt: "أوجد قيمة س (مثلث متساوي الساقين مع مربع، س هي زاوية)",
              options: ["٦٠", "٩٠", "٣٠", "٤٥"],
              correctAnswer: 3,
              howToSolve: "المثلث متساوي الساقين مع زاوية قائمة\nالزاويتان المتساويتان = (١٨٠ - ٩٠) ÷ ٢ = ٤٥°",
              variants: [
                {
                  id: "b2-q13-v1",
                  prompt: "مثلث متساوي الساقين زاوية رأسه ١٢٠°، أوجد زاوية القاعدة",
                  options: ["٢٠", "٣٠", "٤٠", "٥٠"],
                  correctAnswer: 1,
                  explanation: "(١٨٠ - ١٢٠) ÷ ٢ = ٣٠°",
                },
                {
                  id: "b2-q13-v2",
                  prompt: "مثلث متساوي الساقين زاوية رأسه ٨٠°، أوجد زاوية القاعدة",
                  options: ["٤٠", "٥٠", "٦٠", "٧٠"],
                  correctAnswer: 1,
                  explanation: "(١٨٠ - ٨٠) ÷ ٢ = ٥٠°",
                },
              ],
            },
            {
              id: "b2-q14",
              prompt: "متتابعة حسابية فيها س = ١٣، وكل حد يزيد عن السابق بـ ٣، ما مقدار مجموع س والحدود الثلاثة السابقة له؟",
              options: ["٣٢", "٣٣", "٣٤", "٣٥"],
              correctAnswer: 2,
              howToSolve: "س = ١٣\nالحدود السابقة: ١٠، ٧، ٤\nالمجموع = ١٣ + ١٠ + ٧ + ٤ = ٣٤",
              variants: [
                {
                  id: "b2-q14-v1",
                  prompt: "متتابعة حسابية فيها س = ٢٠، وكل حد يزيد عن السابق بـ ٤، ما مجموع س والحدين السابقين؟",
                  options: ["٤٤", "٤٨", "٥٢", "٥٦"],
                  correctAnswer: 1,
                  explanation: "٢٠ + ١٦ + ١٢ = ٤٨",
                },
                {
                  id: "b2-q14-v2",
                  prompt: "متتابعة حسابية فيها س = ١٥، وكل حد يزيد عن السابق بـ ٥، ما مجموع س والحدين السابقين؟",
                  options: ["٢٥", "٣٠", "٣٥", "٤٠"],
                  correctAnswer: 1,
                  explanation: "١٥ + ١٠ + ٥ = ٣٠",
                },
              ],
            },
            {
              id: "b2-q15",
              prompt: "ما قيمة س؟ (مثلث متساوي الساقين داخل دائرة، وتر = قطر)",
              options: ["٣٠", "٤٥", "٦٠", "٩٠"],
              correctAnswer: 1,
              howToSolve: "المثلث المرسوم على القطر زاويته = ٩٠°\nالمثلث متساوي الساقين\nس = (١٨٠ - ٩٠) ÷ ٢ = ٤٥°",
              variants: [
                {
                  id: "b2-q15-v1",
                  prompt: "مثلث قائم الزاوية متساوي الساقين، ما قياس كل زاوية حادة فيه؟",
                  options: ["٣٠", "٤٥", "٥٠", "٦٠"],
                  correctAnswer: 1,
                  explanation: "(١٨٠ - ٩٠) ÷ ٢ = ٤٥°",
                },
                {
                  id: "b2-q15-v2",
                  prompt: "مثلث مرسوم داخل نصف دائرة وقاعدته القطر، ما قياس الزاوية المقابلة للقطر؟",
                  options: ["٤٥", "٦٠", "٩٠", "١٢٠"],
                  correctAnswer: 2,
                  explanation: "الزاوية المرسومة على القطر = ٩٠° (نظرية طاليس)",
                },
              ],
            },
            {
              id: "b2-q16",
              prompt: "إذا كان ص تتناسب عكسياً مع س، ص = ٤ عندما س = ٦، أوجد قيمة ص عندما س = ١٢",
              options: ["٢", "٤", "٦", "٨"],
              correctAnswer: 0,
              howToSolve: "التناسب العكسي: ص × س = ثابت\n٤ × ٦ = ٢٤\nعند س = ١٢:\nص × ١٢ = ٢٤\nص = ٢",
              variants: [
                {
                  id: "b2-q16-v1",
                  prompt: "إذا كان ص تتناسب عكسياً مع س، ص = ٦ عندما س = ٤، أوجد قيمة ص عندما س = ٨",
                  options: ["٢", "٣", "٤", "٦"],
                  correctAnswer: 1,
                  explanation: "ص × س = ٢٤، عند س = ٨: ص = ٢٤ ÷ ٨ = ٣",
                },
                {
                  id: "b2-q16-v2",
                  prompt: "إذا كان ص تتناسب عكسياً مع س، ص = ١٠ عندما س = ٣، أوجد قيمة ص عندما س = ٦",
                  options: ["٣", "٤", "٥", "٦"],
                  correctAnswer: 2,
                  explanation: "ص × س = ٣٠، عند س = ٦: ص = ٣٠ ÷ ٦ = ٥",
                },
              ],
            },
            {
              id: "b2-q17",
              prompt: "في الشكل المجاور أوجد قيمة: ١٨٠ - س - ص (زوايا ٢س و ٢ص و ع)",
              options: ["ع", "٢ع", "ع/٢", "٤ع"],
              correctAnswer: 2,
              howToSolve: "٢س + ٢ص + ع = ١٨٠\n٢(س + ص) = ١٨٠ - ع\nس + ص = (١٨٠ - ع)/٢\n١٨٠ - س - ص = ١٨٠ - (١٨٠ - ع)/٢ = ع/٢",
              variants: [
                {
                  id: "b2-q17-v1",
                  prompt: "مثلث زواياه ٣أ و ٣ب و ج، أوجد قيمة ٦٠ - أ - ب",
                  options: ["ج", "ج/٣", "٣ج", "ج/٢"],
                  correctAnswer: 1,
                  explanation: "٣أ + ٣ب + ج = ١٨٠، أ + ب = (١٨٠-ج)/٣، ٦٠ - أ - ب = ج/٣",
                },
                {
                  id: "b2-q17-v2",
                  prompt: "مثلث زواياه ٤م و ٤ن و ك، أوجد قيمة ٤٥ - م - ن",
                  options: ["ك", "ك/٤", "٤ك", "ك/٢"],
                  correctAnswer: 1,
                  explanation: "٤م + ٤ن + ك = ١٨٠، م + ن = (١٨٠-ك)/٤، ٤٥ - م - ن = ك/٤",
                },
              ],
            },
            {
              id: "b2-q18",
              prompt: "إذا كان: ١٤ < س < ص < ع < ٢٦، س و ص و ع أعداد فردية متتالية أحدهم عدد أولي، أوجد ص + ع",
              options: ["٣٦", "٤٠", "٤٤", "٤٨"],
              correctAnswer: 3,
              howToSolve: "الأعداد الفردية بين ١٤ و ٢٦: ١٥، ١٧، ١٩، ٢١، ٢٣، ٢٥\nالمتتالية التي تحتوي عدد أولي: ١٧، ١٩، ٢١ أو ١٩، ٢١، ٢٣\nإذا س=١٩، ص=٢١، ع=٢٣ (٢٣ أولي)\nص + ع = ٢١ + ٢٣ = ٤٤... لكن الجواب ٤٨\nإذا س=١٧، ص=٢١، ع=٢٥: ص+ع=٤٦\nإذا س=١٥، ص=٢٣، ع=٢٥: ص+ع=٤٨",
              variants: [
                {
                  id: "b2-q18-v1",
                  prompt: "إذا كان: ١٠ < س < ص < ع < ٢٠، س و ص و ع أعداد فردية متتالية أحدهم عدد أولي، أوجد ص + ع",
                  options: ["٢٨", "٣٠", "٣٢", "٣٤"],
                  correctAnswer: 2,
                  explanation: "الأعداد: ١١، ١٣، ١٥، ١٧، ١٩ ← ١٣، ١٥، ١٧ أو ١٥، ١٧، ١٩ ← ص+ع = ٣٢",
                },
                {
                  id: "b2-q18-v2",
                  prompt: "إذا كان: ٢٠ < س < ص < ع < ٣٠، س و ص و ع أعداد فردية متتالية أحدهم عدد أولي، أوجد ص + ع",
                  options: ["٤٨", "٥٠", "٥٢", "٥٤"],
                  correctAnswer: 2,
                  explanation: "الأعداد: ٢١، ٢٣، ٢٥، ٢٧، ٢٩ ← ٢٣، ٢٥، ٢٧ ← ص+ع = ٥٢",
                },
              ],
            },
            {
              id: "b2-q19",
              prompt: "قارن بين: القيمة الأولى: (٧ + ٦) + (٦ + ٧)، القيمة الثانية: (٧ + ٧) + (٧ + ٨)",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 1,
              howToSolve: "القيمة الأولى = ١٣ + ١٣ = ٢٦\nالقيمة الثانية = ١٤ + ١٥ = ٢٩\n٢٦ < ٢٩ ← القيمة الثانية أكبر",
              variants: [
                {
                  id: "b2-q19-v1",
                  prompt: "قارن بين: القيمة الأولى: (٥ + ٤) + (٤ + ٥)، القيمة الثانية: (٥ + ٥) + (٥ + ٦)",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 1,
                  explanation: "الأولى = ٩ + ٩ = ١٨، الثانية = ١٠ + ١١ = ٢١ ← الثانية أكبر",
                },
                {
                  id: "b2-q19-v2",
                  prompt: "قارن بين: القيمة الأولى: (٨ + ٩) + (٩ + ٨)، القيمة الثانية: (٨ + ٨) + (٨ + ٩)",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "الأولى = ١٧ + ١٧ = ٣٤، الثانية = ١٦ + ١٧ = ٣٣ ← الأولى أكبر",
                },
              ],
            },
            {
              id: "b2-q20",
              prompt: "وزعت ٣٢ قطعة كعك بالتساوي على ١٢ طفل، كم عدد القطع المتبقية؟",
              options: ["١٠", "١١", "٨", "٩"],
              correctAnswer: 2,
              howToSolve: "٣٢ ÷ ١٢ = ٢ والباقي ٨\nكل طفل يأخذ ٢ قطعة\n١٢ × ٢ = ٢٤\nالمتبقي = ٣٢ - ٢٤ = ٨",
              variants: [
                {
                  id: "b2-q20-v1",
                  prompt: "وزعت ٤٧ قطعة حلوى بالتساوي على ٨ أطفال، كم عدد القطع المتبقية؟",
                  options: ["٥", "٦", "٧", "٨"],
                  correctAnswer: 2,
                  explanation: "٤٧ ÷ ٨ = ٥ والباقي ٧",
                },
                {
                  id: "b2-q20-v2",
                  prompt: "وزعت ٥٣ قطعة شوكولاتة بالتساوي على ٩ أطفال، كم عدد القطع المتبقية؟",
                  options: ["٦", "٧", "٨", "٩"],
                  correctAnswer: 2,
                  explanation: "٥٣ ÷ ٩ = ٥ والباقي ٨",
                },
              ],
            },
            {
              id: "b2-q21",
              prompt: "قارن بين: القيمة الأولى: (٣٥×٣٤×٣٣×٣٢×٣١×٣٠)/٤، القيمة الثانية: (٣٦×٣٥×٣٤×٣٣×٣٢×٣١)/٦",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 0,
              howToSolve: "القيمة الأولى = (٣٥×٣٤×٣٣×٣٢×٣١×٣٠)/٤\nالقيمة الثانية = (٣٦×٣٥×٣٤×٣٣×٣٢×٣١)/٦\nبالمقارنة: الأولى تحتوي ٣٠ والثانية ٣٦\n٣٠/٤ = ٧.٥ و ٣٦/٦ = ٦\n← القيمة الأولى أكبر",
              variants: [
                {
                  id: "b2-q21-v1",
                  prompt: "قارن بين: القيمة الأولى: (٢٠×١٩×١٨×١٧×١٦)/٢، القيمة الثانية: (٢١×٢٠×١٩×١٨×١٧)/٣",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "١٦/٢ = ٨ > ٢١/٣ = ٧ ← الأولى أكبر",
                },
                {
                  id: "b2-q21-v2",
                  prompt: "قارن بين: القيمة الأولى: (١٥×١٤×١٣×١٢)/٣، القيمة الثانية: (١٦×١٥×١٤×١٣)/٤",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 2,
                  explanation: "١٢/٣ = ٤ = ١٦/٤ = ٤ ← متساويتان",
                },
              ],
            },
            {
              id: "b2-q22",
              prompt: "اشترى تاجر سلعة بـ ٩٠ ريال ويبيعها بربح ٥٠٪، وأي مشتري يدفع نقداً له خصم ٣٠٪ من سعر البيع، ما نسبة ربح التاجر إذا باع السلعة نقداً؟",
              options: ["١٦٪", "٥٪", "١١٪", "٢٠٪"],
              correctAnswer: 1,
              howToSolve: "سعر البيع = ٩٠ × ١.٥ = ١٣٥ ريال\nالخصم = ١٣٥ × ٠.٣ = ٤٠.٥ ريال\nسعر البيع النقدي = ١٣٥ - ٤٠.٥ = ٩٤.٥ ريال\nالربح = ٩٤.٥ - ٩٠ = ٤.٥ ريال\nنسبة الربح = (٤.٥/٩٠) × ١٠٠ = ٥٪",
              variants: [
                {
                  id: "b2-q22-v1",
                  prompt: "اشترى تاجر سلعة بـ ٨٠ ريال ويبيعها بربح ٢٥٪، وأي مشتري يدفع نقداً له خصم ٢٠٪ من سعر البيع، ما نسبة ربح التاجر إذا باع السلعة نقداً؟",
                  options: ["صفر٪", "٥٪", "١٠٪", "١٥٪"],
                  correctAnswer: 0,
                  explanation: "سعر البيع = ١٠٠، بعد الخصم = ٨٠، الربح = صفر٪",
                },
                {
                  id: "b2-q22-v2",
                  prompt: "اشترى تاجر سلعة بـ ١٠٠ ريال ويبيعها بربح ٤٠٪، وأي مشتري يدفع نقداً له خصم ٢٠٪ من سعر البيع، ما نسبة ربح التاجر إذا باع السلعة نقداً؟",
                  options: ["٨٪", "١٢٪", "١٦٪", "٢٠٪"],
                  correctAnswer: 1,
                  explanation: "سعر البيع = ١٤٠، بعد الخصم = ١١٢، الربح = ١٢٪",
                },
              ],
            },
            {
              id: "b2-q23",
              prompt: "ما عدد المربعات؟ (شكل درجي)",
              options: ["١٠", "١١", "١٢", "١٣"],
              correctAnswer: 3,
              howToSolve: "نعد المربعات الصغيرة + المربعات الكبيرة\nالمربعات ١×١ = ١٠\nالمربعات ٢×٢ = ٣\nالمجموع = ١٣",
              variants: [
                {
                  id: "b2-q23-v1",
                  prompt: "ما عدد المربعات في شبكة ٢×٢؟",
                  options: ["٤", "٥", "٦", "٧"],
                  correctAnswer: 1,
                  explanation: "المربعات ١×١ = ٤، المربعات ٢×٢ = ١، المجموع = ٥",
                },
                {
                  id: "b2-q23-v2",
                  prompt: "ما عدد المربعات في شبكة ٣×٣؟",
                  options: ["١٢", "١٣", "١٤", "١٥"],
                  correctAnswer: 2,
                  explanation: "المربعات ١×١ = ٩، ٢×٢ = ٤، ٣×٣ = ١، المجموع = ١٤",
                },
              ],
            },
            {
              id: "b2-q24",
              prompt: "ما الأكثر ثباتاً طوال العام؟ (جدول مبيعات: الإكسسوارات، الطابعات، الجوالات، الكمبيوترات)",
              options: ["الإكسسوارات", "الطابعات", "الجوالات", "الكمبيوترات"],
              correctAnswer: 0,
              howToSolve: "الإكسسوارات: ١٥، ١٥، ١٤، ١٥ (فرق ضئيل)\nالطابعات: ٢٠، ٢٢، ٢٤، ٢٥\nالجوالات: ١٥، ٣٥، ٤٥، ٦٠\nالكمبيوترات: ١٠، ٢٥، ٢٥، ٥٥\nالإكسسوارات الأكثر ثباتاً",
              variants: [
                {
                  id: "b2-q24-v1",
                  prompt: "ما الأكثر ثباتاً خلال الفصول؟ (أ: ٢٠، ٢١، ٢٠، ٢٠ | ب: ١٠، ٣٠، ٤٠، ٥٠ | ج: ٢٥، ٣٠، ٣٥، ٤٠ | د: ٥، ١٥، ٢٥، ٣٥)",
                  options: ["أ", "ب", "ج", "د"],
                  correctAnswer: 0,
                  explanation: "أ الأكثر ثباتاً (فرق ١ فقط)",
                },
                {
                  id: "b2-q24-v2",
                  prompt: "ما الأكثر ثباتاً خلال الأشهر؟ (س: ٥٠، ٥٢، ٥١، ٥٠ | ص: ٤٠، ٦٠، ٨٠، ١٠٠ | ع: ٣٠، ٣٥، ٤٠، ٤٥ | ل: ٢٠، ٤٠، ٦٠، ٨٠)",
                  options: ["س", "ص", "ع", "ل"],
                  correctAnswer: 0,
                  explanation: "س الأكثر ثباتاً (فرق ٢ فقط)",
                },
              ],
            },
            {
              id: "b2-q25",
              prompt: "إذا كان (أ+ب+ج+د)/٤ = ٨، أ + ب = ١٠، أوجد قيمة (ج + د)/٢",
              options: ["٩", "٧", "١١", "٣"],
              correctAnswer: 2,
              howToSolve: "أ + ب + ج + د = ٣٢\nج + د = ٣٢ - ١٠ = ٢٢\n(ج + د)/٢ = ٢٢/٢ = ١١",
              variants: [
                {
                  id: "b2-q25-v1",
                  prompt: "إذا كان (أ+ب+ج+د)/٤ = ١٠، أ + ب = ١٤، أوجد قيمة (ج + د)/٢",
                  options: ["١١", "١٢", "١٣", "١٤"],
                  correctAnswer: 2,
                  explanation: "أ+ب+ج+د = ٤٠، ج+د = ٢٦، (ج+د)/٢ = ١٣",
                },
                {
                  id: "b2-q25-v2",
                  prompt: "إذا كان (أ+ب+ج+د)/٤ = ١٥، أ + ب = ٢٠، أوجد قيمة (ج + د)/٢",
                  options: ["١٨", "٢٠", "٢٢", "٢٤"],
                  correctAnswer: 1,
                  explanation: "أ+ب+ج+د = ٦٠، ج+د = ٤٠، (ج+د)/٢ = ٢٠",
                },
              ],
            },
            {
              id: "b2-q26",
              prompt: "موقف سيارات يتسع ٤٣٢ سيارة مقسمة إلى ستة أجزاء كل جزء مكون من ٧٢ موقف ومرتبة حسب اللون (أحمر-أبيض-أخضر-أصفر-أسود-أزرق) على الترتيب، ما لون السيارة في الموقف رقم ٣٦٠؟",
              options: ["أبيض", "أسود", "أزرق", "أصفر"],
              correctAnswer: 1,
              howToSolve: "٣٦٠ ÷ ٧٢ = ٥\nالموقف ٣٦٠ في نهاية الجزء الخامس\nالجزء الخامس = أسود",
              variants: [
                {
                  id: "b2-q26-v1",
                  prompt: "موقف سيارات مقسم إلى ٤ أجزاء كل جزء ٥٠ موقف (أحمر-أزرق-أخضر-أصفر)، ما لون الموقف رقم ١٢٥؟",
                  options: ["أحمر", "أزرق", "أخضر", "أصفر"],
                  correctAnswer: 2,
                  explanation: "١٢٥ ÷ ٥٠ = ٢.٥ ← الجزء الثالث = أخضر",
                },
                {
                  id: "b2-q26-v2",
                  prompt: "موقف سيارات مقسم إلى ٥ أجزاء كل جزء ٤٠ موقف (أبيض-رمادي-أسود-بني-برتقالي)، ما لون الموقف رقم ١٦٠؟",
                  options: ["أبيض", "رمادي", "أسود", "بني"],
                  correctAnswer: 3,
                  explanation: "١٦٠ ÷ ٤٠ = ٤ ← الجزء الرابع = بني",
                },
              ],
            },
            {
              id: "b2-q27",
              prompt: "إذا كان للدائرة والمربع نفس المحيط، قارن بين: القيمة الأولى: مساحة الدائرة، القيمة الثانية: مساحة المربع",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 0,
              howToSolve: "عند تساوي المحيط، الدائرة دائماً لها مساحة أكبر\nهذه حقيقة هندسية ثابتة",
              variants: [
                {
                  id: "b2-q27-v1",
                  prompt: "إذا كان للدائرة والمستطيل نفس المحيط، قارن بين: القيمة الأولى: مساحة الدائرة، القيمة الثانية: مساحة المستطيل",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "الدائرة دائماً لها أكبر مساحة عند تساوي المحيط",
                },
                {
                  id: "b2-q27-v2",
                  prompt: "إذا كان للدائرة والمثلث متساوي الأضلاع نفس المحيط، قارن بين: القيمة الأولى: مساحة الدائرة، القيمة الثانية: مساحة المثلث",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "الدائرة دائماً لها أكبر مساحة عند تساوي المحيط",
                },
              ],
            },
            {
              id: "b2-q28",
              prompt: "يدفع شخص في موقف سيارات ريالين لكل ساعة أو جزء من الساعة، فإذا وقف الساعة ٨:٠٥ صباحاً وخرج الساعة ١١:٤٥ صباحاً، فكم المبلغ الذي سيدفعه؟",
              options: ["٣", "٤", "٧", "٨"],
              correctAnswer: 3,
              howToSolve: "من ٨:٠٥ إلى ١١:٤٥ = ٣ ساعات و ٤٠ دقيقة\n= ٤ ساعات (لأن أي جزء يحسب ساعة كاملة)\nالمبلغ = ٤ × ٢ = ٨ ريال",
              variants: [
                {
                  id: "b2-q28-v1",
                  prompt: "يدفع شخص في موقف سيارات ٣ ريال لكل ساعة أو جزء منها، فإذا وقف الساعة ٩:١٠ صباحاً وخرج الساعة ١٢:٣٠ ظهراً، فكم المبلغ الذي سيدفعه؟",
                  options: ["٩", "١٢", "١٥", "١٨"],
                  correctAnswer: 1,
                  explanation: "٣ ساعات و ٢٠ دقيقة = ٤ ساعات، المبلغ = ٤ × ٣ = ١٢ ريال",
                },
                {
                  id: "b2-q28-v2",
                  prompt: "يدفع شخص في موقف سيارات ٥ ريال لكل ساعة أو جزء منها، فإذا وقف الساعة ٢:٠٠ ظهراً وخرج الساعة ٤:١٥ عصراً، فكم المبلغ الذي سيدفعه؟",
                  options: ["١٠", "١٥", "٢٠", "٢٥"],
                  correctAnswer: 1,
                  explanation: "٢ ساعة و ١٥ دقيقة = ٣ ساعات، المبلغ = ٣ × ٥ = ١٥ ريال",
                },
              ],
            },
            {
              id: "b2-q29",
              prompt: "ما العدد الذي ثلثه يساوي ١٠/١٥؟",
              options: ["١", "٢", "٣", "٤"],
              correctAnswer: 1,
              howToSolve: "العدد/٣ = ١٠/١٥ = ٢/٣\nالعدد = ٢/٣ × ٣ = ٢",
              variants: [
                {
                  id: "b2-q29-v1",
                  prompt: "ما العدد الذي ربعه يساوي ٩/١٢؟",
                  options: ["٢", "٣", "٤", "٥"],
                  correctAnswer: 1,
                  explanation: "العدد/٤ = ٩/١٢ = ٣/٤، العدد = ٣",
                },
                {
                  id: "b2-q29-v2",
                  prompt: "ما العدد الذي نصفه يساوي ٨/١٦؟",
                  options: ["١", "٢", "٣", "٤"],
                  correctAnswer: 0,
                  explanation: "العدد/٢ = ٨/١٦ = ١/٢، العدد = ١",
                },
              ],
            },
            {
              id: "b2-q30",
              prompt: "مستطيل محيطه (٦ص + ٢س) وعرضه ٢ص، فما طوله؟",
              options: ["٢ص + س", "ص + س", "ص + ٢س", "٣س + ٣ص"],
              correctAnswer: 1,
              howToSolve: "محيط المستطيل = ٢(الطول + العرض)\n٦ص + ٢س = ٢(الطول + ٢ص)\n٣ص + س = الطول + ٢ص\nالطول = ص + س",
              variants: [
                {
                  id: "b2-q30-v1",
                  prompt: "مستطيل محيطه (٨أ + ٤ب) وعرضه ٢أ، فما طوله؟",
                  options: ["٢أ + ٢ب", "أ + ب", "٢أ + ب", "أ + ٢ب"],
                  correctAnswer: 0,
                  explanation: "٨أ + ٤ب = ٢(الطول + ٢أ)، ٤أ + ٢ب = الطول + ٢أ، الطول = ٢أ + ٢ب",
                },
                {
                  id: "b2-q30-v2",
                  prompt: "مستطيل محيطه (١٠م + ٦ن) وعرضه ٣م، فما طوله؟",
                  options: ["م + ٣ن", "٢م + ٣ن", "٣م + ن", "م + ن"],
                  correctAnswer: 1,
                  explanation: "١٠م + ٦ن = ٢(الطول + ٣م)، ٥م + ٣ن = الطول + ٣م، الطول = ٢م + ٣ن",
                },
              ],
            },
            {
              id: "b2-q31",
              prompt: "مستطيل طوله ٥⅓ وعرضه ٢¼، احسب مساحته",
              options: ["١٢", "١٢.٥", "١١", "١١.٥"],
              correctAnswer: 0,
              howToSolve: "المساحة = الطول × العرض\n= (١٦/٣) × (٩/٤)\n= ١٤٤/١٢ = ١٢",
              variants: [
                {
                  id: "b2-q31-v1",
                  prompt: "مستطيل طوله ٣½ وعرضه ٢، احسب مساحته",
                  options: ["٦", "٧", "٧.٥", "٨"],
                  correctAnswer: 1,
                  explanation: "المساحة = ٧/٢ × ٢ = ٧",
                },
                {
                  id: "b2-q31-v2",
                  prompt: "مستطيل طوله ٤⅔ وعرضه ١½، احسب مساحته",
                  options: ["٦", "٧", "٨", "٩"],
                  correctAnswer: 1,
                  explanation: "المساحة = ١٤/٣ × ٣/٢ = ٤٢/٦ = ٧",
                },
              ],
            },
            {
              id: "b2-q32",
              prompt: "إذا أجاب طالب على ٣٠ سؤال في الاختبار وهي تمثل ٦٠٪، كم عدد الأسئلة التي لم يجب عنها؟",
              options: ["١٠", "١٥", "٢٠", "٣٠"],
              correctAnswer: 2,
              howToSolve: "٣٠ سؤال = ٦٠٪\nإجمالي الأسئلة = ٣٠ ÷ ٠.٦ = ٥٠\nالأسئلة التي لم يجب عنها = ٥٠ - ٣٠ = ٢٠",
              variants: [
                {
                  id: "b2-q32-v1",
                  prompt: "إذا أجاب طالب على ٤٠ سؤال في الاختبار وهي تمثل ٨٠٪، كم عدد الأسئلة التي لم يجب عنها؟",
                  options: ["٥", "١٠", "١٥", "٢٠"],
                  correctAnswer: 1,
                  explanation: "الإجمالي = ٤٠ ÷ ٠.٨ = ٥٠، لم يجب عنها = ٥٠ - ٤٠ = ١٠",
                },
                {
                  id: "b2-q32-v2",
                  prompt: "إذا أجاب طالب على ٢٤ سؤال في الاختبار وهي تمثل ٧٥٪، كم عدد الأسئلة التي لم يجب عنها؟",
                  options: ["٦", "٨", "١٠", "١٢"],
                  correctAnswer: 1,
                  explanation: "الإجمالي = ٢٤ ÷ ٠.٧٥ = ٣٢، لم يجب عنها = ٣٢ - ٢٤ = ٨",
                },
              ],
            },
            {
              id: "b2-q33",
              prompt: "قطار ركاب يمتلئ بـ ٩١ شخص، في المحطة الأولى يصعد إلى القطار شخص واحد وفي المحطة الثانية شخصين وفي الثالثة ٣ أشخاص وهكذا في كل محطة يمر بها القطار، في أي محطة سوف يمتلئ القطار؟",
              options: ["١٢", "١٣", "١٤", "١٥"],
              correctAnswer: 1,
              howToSolve: "مجموع المتتابعة = ن(ن+١)/٢\n٩١ = ن(ن+١)/٢\n١٨٢ = ن² + ن\nن² + ن - ١٨٢ = ٠\n(ن + ١٤)(ن - ١٣) = ٠\nن = ١٣",
              variants: [
                {
                  id: "b2-q33-v1",
                  prompt: "حافلة تمتلئ بـ ٥٥ راكب، في المحطة الأولى يصعد راكب واحد وفي الثانية راكبان وهكذا، في أي محطة تمتلئ الحافلة؟",
                  options: ["٨", "٩", "١٠", "١١"],
                  correctAnswer: 2,
                  explanation: "ن(ن+١)/٢ = ٥٥ ← ن = ١٠",
                },
                {
                  id: "b2-q33-v2",
                  prompt: "باص يمتلئ بـ ٣٦ راكب، في المحطة الأولى يصعد راكب واحد وفي الثانية راكبان وهكذا، في أي محطة يمتلئ الباص؟",
                  options: ["٦", "٧", "٨", "٩"],
                  correctAnswer: 2,
                  explanation: "ن(ن+١)/٢ = ٣٦ ← ن = ٨",
                },
              ],
            },
            {
              id: "b2-q34",
              prompt: "إذا كانت المثلثات متطابقة ومساحة المثلث الكبير = ٦٠ سم²، أوجد مساحة المظلل",
              options: ["٤٠", "٣٥", "٣٢", "٣٠"],
              correctAnswer: 3,
              howToSolve: "المثلث الكبير مقسم إلى ٤ مثلثات متطابقة\nمساحة كل مثلث صغير = ٦٠ ÷ ٤ = ١٥ سم²\nالمظلل = ٢ مثلث = ٣٠ سم²",
              variants: [
                {
                  id: "b2-q34-v1",
                  prompt: "إذا كانت المثلثات متطابقة ومساحة المثلث الكبير = ٨٠ سم²، أوجد مساحة المظلل (٢ مثلث)",
                  options: ["٣٠", "٣٥", "٤٠", "٤٥"],
                  correctAnswer: 2,
                  explanation: "مساحة كل مثلث = ٨٠ ÷ ٤ = ٢٠، المظلل = ٢ × ٢٠ = ٤٠",
                },
                {
                  id: "b2-q34-v2",
                  prompt: "إذا كانت المثلثات متطابقة ومساحة المثلث الكبير = ١٠٠ سم²، أوجد مساحة المظلل (٢ مثلث)",
                  options: ["٤٠", "٤٥", "٥٠", "٥٥"],
                  correctAnswer: 2,
                  explanation: "مساحة كل مثلث = ١٠٠ ÷ ٤ = ٢٥، المظلل = ٢ × ٢٥ = ٥٠",
                },
              ],
            },
            {
              id: "b2-q35",
              prompt: "في الشكل المجاور، أوجد قيمة س (زوايا ١١٠° و ١٢٠° و ١٣س على خطين متوازيين)",
              options: ["١٣٠", "١٠", "١٨٠", "٢٤٠"],
              correctAnswer: 1,
              howToSolve: "١١٠ + ١٣س + ١٢٠ = ٣٦٠° (زوايا الشكل الرباعي)\n٢٣٠ + ١٣س = ٣٦٠\n١٣س = ١٣٠\nس = ١٠",
              variants: [
                {
                  id: "b2-q35-v1",
                  prompt: "في شكل رباعي، زواياه ١٠٠° و ١٤٠° و ٨س، أوجد قيمة س",
                  options: ["١٠", "١٥", "٢٠", "٢٥"],
                  correctAnswer: 1,
                  explanation: "١٠٠ + ١٤٠ + ٨س + الرابعة = ٣٦٠، ٨س = ١٢٠، س = ١٥",
                },
                {
                  id: "b2-q35-v2",
                  prompt: "في شكل رباعي، زواياه ٩٠° و ١٠٠° و ١٠٠° و ٧س، أوجد قيمة س",
                  options: ["٥", "١٠", "١٥", "٢٠"],
                  correctAnswer: 1,
                  explanation: "٩٠ + ١٠٠ + ١٠٠ + ٧س = ٣٦٠، ٧س = ٧٠، س = ١٠",
                },
              ],
            },
            {
              id: "b2-q36",
              prompt: "ما متوسط آخر ٣ سنوات؟ (رسم بياني: ٢٠٢٠=٣٠، ٢٠٢١=٤٠، ٢٠٢٢=٥٠)",
              options: ["٤٠", "٦٠", "٨٠", "١٠٠"],
              correctAnswer: 0,
              howToSolve: "آخر ٣ سنوات: ٣٠ + ٤٠ + ٥٠ = ١٢٠\nالمتوسط = ١٢٠ ÷ ٣ = ٤٠",
              variants: [
                {
                  id: "b2-q36-v1",
                  prompt: "ما متوسط آخر ٣ سنوات؟ (٢٠٢٠=٢٠، ٢٠٢١=٤٠، ٢٠٢٢=٦٠)",
                  options: ["٣٠", "٤٠", "٥٠", "٦٠"],
                  correctAnswer: 1,
                  explanation: "المتوسط = (٢٠ + ٤٠ + ٦٠) ÷ ٣ = ٤٠",
                },
                {
                  id: "b2-q36-v2",
                  prompt: "ما متوسط آخر ٤ سنوات؟ (٢٠١٩=١٠، ٢٠٢٠=٢٠، ٢٠٢١=٣٠، ٢٠٢٢=٤٠)",
                  options: ["٢٠", "٢٥", "٣٠", "٣٥"],
                  correctAnswer: 1,
                  explanation: "المتوسط = (١٠ + ٢٠ + ٣٠ + ٤٠) ÷ ٤ = ٢٥",
                },
              ],
            },
            {
              id: "b2-q37",
              prompt: "قارن بين: القيمة الأولى: ١٥٠٠ جرام، القيمة الثانية: ١.٥ كيلو جرام",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 2,
              howToSolve: "١.٥ كيلو جرام = ١٥٠٠ جرام\nالقيمتان متساويتان",
              variants: [
                {
                  id: "b2-q37-v1",
                  prompt: "قارن بين: القيمة الأولى: ٢٥٠٠ ملم، القيمة الثانية: ٢.٥ متر",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 2,
                  explanation: "٢.٥ متر = ٢٥٠٠ ملم ← متساويتان",
                },
                {
                  id: "b2-q37-v2",
                  prompt: "قارن بين: القيمة الأولى: ٣٠٠٠ مل، القيمة الثانية: ٣ لتر",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 2,
                  explanation: "٣ لتر = ٣٠٠٠ مل ← متساويتان",
                },
              ],
            },
            {
              id: "b2-q38",
              prompt: "ما عدد الطلاب الحاصلين على أقل من ٨ درجات؟ (جدول: درجة ٥=١ طالب، ٦=٢، ٧=٤، ٨=٥، ٩=٤)",
              options: ["٦", "٧", "٨", "٩"],
              correctAnswer: 1,
              howToSolve: "أقل من ٨ درجات: درجات ٥، ٦، ٧\nالعدد = ١ + ٢ + ٤ = ٧ طلاب",
              variants: [
                {
                  id: "b2-q38-v1",
                  prompt: "ما عدد الطلاب الحاصلين على أكثر من ٦ درجات؟ (جدول: درجة ٥=٣، ٦=٥، ٧=٤، ٨=٢، ٩=١)",
                  options: ["٥", "٦", "٧", "٨"],
                  correctAnswer: 2,
                  explanation: "أكثر من ٦: درجات ٧، ٨، ٩ = ٤ + ٢ + ١ = ٧",
                },
                {
                  id: "b2-q38-v2",
                  prompt: "ما عدد الطلاب الحاصلين على ٧ درجات أو أقل؟ (جدول: درجة ٤=٢، ٥=٣، ٦=٤، ٧=٦، ٨=٥)",
                  options: ["١٣", "١٤", "١٥", "١٦"],
                  correctAnswer: 2,
                  explanation: "٧ أو أقل: ٢ + ٣ + ٤ + ٦ = ١٥",
                },
              ],
            },
            {
              id: "b2-q39",
              prompt: "إذا كان أ، ب، ج أعداد طبيعية، أ³ - ٨ = صفر، ب² - ٤ = صفر، ج - ٨ = صفر، أوجد أ + ب + ج",
              options: ["٨", "١٠", "١٢", "١٦"],
              correctAnswer: 2,
              howToSolve: "أ³ = ٨ ← أ = ٢\nب² = ٤ ← ب = ٢\nج = ٨\nأ + ب + ج = ٢ + ٢ + ٨ = ١٢",
              variants: [
                {
                  id: "b2-q39-v1",
                  prompt: "إذا كان س³ = ٢٧، ص² = ٩، ع = ٥، أوجد س + ص + ع",
                  options: ["١٠", "١١", "١٢", "١٣"],
                  correctAnswer: 1,
                  explanation: "س = ٣، ص = ٣، ع = ٥ ← المجموع = ١١",
                },
                {
                  id: "b2-q39-v2",
                  prompt: "إذا كان م³ = ٦٤، ن² = ١٦، ل = ٣، أوجد م + ن + ل",
                  options: ["٩", "١٠", "١١", "١٢"],
                  correctAnswer: 2,
                  explanation: "م = ٤، ن = ٤، ل = ٣ ← المجموع = ١١",
                },
              ],
            },
            {
              id: "b2-q40",
              prompt: "قارن بين: القيمة الأولى: قياس الزاوية (١) في مثلث متساوي الساقين، القيمة الثانية: ٤٢",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 3,
              howToSolve: "لا نعرف قياسات المثلث\nالمعطيات غير كافية لتحديد قيمة الزاوية",
              variants: [
                {
                  id: "b2-q40-v1",
                  prompt: "قارن بين: القيمة الأولى: قياس زاوية في مثلث، القيمة الثانية: ٦٠",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 3,
                  explanation: "لا نعرف نوع المثلث أو قياساته ← المعطيات غير كافية",
                },
                {
                  id: "b2-q40-v2",
                  prompt: "قارن بين: القيمة الأولى: قياس زاوية في شكل رباعي، القيمة الثانية: ٩٠",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 3,
                  explanation: "لا نعرف نوع الشكل أو قياساته ← المعطيات غير كافية",
                },
              ],
            },
            {
              id: "b2-q41",
              prompt: "أوجد قيمة ص (شبه منحرف بزوايا ١١٠° و ٥٠° و ص)",
              options: ["٦٠", "٧٠", "٩٠", "١١٠"],
              correctAnswer: 0,
              howToSolve: "في شبه المنحرف، الزوايا المتتالية على نفس الساق متتامة\nص + ١٢٠ = ١٨٠ (لكن نحتاج للشكل)\nأو: ص = ١٨٠ - ٥٠ - ٧٠ = ٦٠°",
              variants: [
                {
                  id: "b2-q41-v1",
                  prompt: "أوجد قيمة س (شبه منحرف بزوايا ١٢٠° و ٤٠° و س)",
                  options: ["٥٠", "٦٠", "٧٠", "٨٠"],
                  correctAnswer: 1,
                  explanation: "الزوايا المتتالية متتامة: س + ١٢٠ = ١٨٠ ← س = ٦٠°",
                },
                {
                  id: "b2-q41-v2",
                  prompt: "أوجد قيمة ع (شبه منحرف بزوايا ١٠٠° و ٦٠° و ع)",
                  options: ["٧٠", "٨٠", "٩٠", "١٠٠"],
                  correctAnswer: 1,
                  explanation: "الزوايا المتتالية متتامة: ع + ١٠٠ = ١٨٠ ← ع = ٨٠°",
                },
              ],
            },
            {
              id: "b2-q42",
              prompt: "قارن بين: القيمة الأولى: مساحة المظلل (قطع ناقص على شبكة)، القيمة الثانية: ٨ سم²",
              options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
              correctAnswer: 0,
              howToSolve: "بالنظر للشكل على الشبكة\nالمساحة المظللة > ٨ وحدات مربعة\nالقيمة الأولى أكبر",
              variants: [
                {
                  id: "b2-q42-v1",
                  prompt: "قارن بين: القيمة الأولى: مساحة مربع ضلعه ٤، القيمة الثانية: ١٥ سم²",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "مساحة المربع = ١٦ > ١٥ ← الأولى أكبر",
                },
                {
                  id: "b2-q42-v2",
                  prompt: "قارن بين: القيمة الأولى: مساحة دائرة نصف قطرها ٢، القيمة الثانية: ١٢ سم²",
                  options: ["القيمة الأولى أكبر", "القيمة الثانية أكبر", "القيمتان متساويتان", "المعطيات غير كافية"],
                  correctAnswer: 0,
                  explanation: "مساحة الدائرة = π × ٤ ≈ ١٢.٥٧ > ١٢ ← الأولى أكبر",
                },
              ],
            },
            {
              id: "b2-q43",
              prompt: "باعت مكتبة ثُمن عدد كتب التاريخ، واشترت ١٠ كتب جديدة فأصبح عدد كتب التاريخ بالمكتبة ٥٢، كم عدد كتب التاريخ الأصلي؟",
              options: ["٦٤", "٤٢", "٤٨", "٣٢"],
              correctAnswer: 2,
              howToSolve: "نفرض العدد الأصلي = س\nس - س/٨ + ١٠ = ٥٢\n٧س/٨ = ٤٢\nس = ٤٨",
              variants: [
                {
                  id: "b2-q43-v1",
                  prompt: "باعت مكتبة رُبع عدد كتب العلوم، واشترت ٥ كتب جديدة فأصبح عدد الكتب ٢٩، كم عدد الكتب الأصلي؟",
                  options: ["٢٨", "٣٢", "٣٦", "٤٠"],
                  correctAnswer: 1,
                  explanation: "س - س/٤ + ٥ = ٢٩ ← ٣س/٤ = ٢٤ ← س = ٣٢",
                },
                {
                  id: "b2-q43-v2",
                  prompt: "باعت مكتبة خُمس عدد كتب الأدب، واشترت ٨ كتب جديدة فأصبح عدد الكتب ٤٨، كم عدد الكتب الأصلي؟",
                  options: ["٤٠", "٤٥", "٥٠", "٥٥"],
                  correctAnswer: 2,
                  explanation: "س - س/٥ + ٨ = ٤٨ ← ٤س/٥ = ٤٠ ← س = ٥٠",
                },
              ],
            },
            {
              id: "b2-q44",
              prompt: "إذا كان ٤٦ ≤ ص ≤ ١٢٩٦، ٢٤ ≤ س ≤ ٣٦، ما أكبر قيمة لـ ص/س؟",
              options: ["٣٦", "٥٤", "٢٧", "٤٥"],
              correctAnswer: 1,
              howToSolve: "أكبر قيمة لـ ص/س تكون عندما:\nص أكبر ما يمكن = ١٢٩٦\nس أصغر ما يمكن = ٢٤\nص/س = ١٢٩٦ ÷ ٢٤ = ٥٤",
              variants: [
                {
                  id: "b2-q44-v1",
                  prompt: "إذا كان ١٠ ≤ ص ≤ ١٠٠، ٥ ≤ س ≤ ١٠، ما أكبر قيمة لـ ص/س؟",
                  options: ["١٠", "١٥", "٢٠", "٢٥"],
                  correctAnswer: 2,
                  explanation: "أكبر ص = ١٠٠، أصغر س = ٥ ← ص/س = ٢٠",
                },
                {
                  id: "b2-q44-v2",
                  prompt: "إذا كان ٢٠ ≤ ص ≤ ١٨٠، ٤ ≤ س ≤ ٩، ما أكبر قيمة لـ ص/س؟",
                  options: ["٣٠", "٣٥", "٤٠", "٤٥"],
                  correctAnswer: 3,
                  explanation: "أكبر ص = ١٨٠، أصغر س = ٤ ← ص/س = ٤٥",
                },
              ],
            },
            {
              id: "b2-q45",
              prompt: "إذا كانت س، ص، ع أعداد نسبية، أي الآتي خاطئ؟",
              options: ["(ص+ع)+س = ص+(ع+س)", "(ص+ع)×س = (ص+س)×ع", "ص×(س×ع) = (ص×س)×ع", "(ص+ع)×س = ص×س + ع×س"],
              correctAnswer: 1,
              howToSolve: "الخيار ب خاطئ\n(ص+ع)×س ≠ (ص+س)×ع\nالأولى = ص×س + ع×س\nالثانية = ص×ع + س×ع",
              variants: [
                {
                  id: "b2-q45-v1",
                  prompt: "إذا كانت أ، ب، ج أعداد حقيقية، أي الآتي خاطئ؟",
                  options: ["أ + ب = ب + أ", "أ × (ب + ج) = أ × ب + ج", "أ × ب = ب × أ", "(أ + ب) + ج = أ + (ب + ج)"],
                  correctAnswer: 1,
                  explanation: "الخيار ب خاطئ، الصحيح: أ × (ب + ج) = أ×ب + أ×ج",
                },
                {
                  id: "b2-q45-v2",
                  prompt: "إذا كانت م، ن، ل أعداد صحيحة، أي الآتي خاطئ؟",
                  options: ["م + ن = ن + م", "م × ن = ن × م", "(م - ن) × ل = م × ل + ن × ل", "(م + ن) × ل = م × ل + ن × ل"],
                  correctAnswer: 2,
                  explanation: "الخيار ج خاطئ، الصحيح: (م - ن) × ل = م×ل - ن×ل",
                },
              ],
            },
            {
              id: "b2-q46",
              prompt: "٦ أعداد متتالية مجموعهم ٨٧، ما أصغر عدد؟",
              options: ["١٣", "١٧", "١٤", "١٢"],
              correctAnswer: 3,
              howToSolve: "نفرض أصغر عدد = ن\nن + (ن+١) + (ن+٢) + (ن+٣) + (ن+٤) + (ن+٥) = ٨٧\n٦ن + ١٥ = ٨٧\n٦ن = ٧٢\nن = ١٢",
              variants: [
                {
                  id: "b2-q46-v1",
                  prompt: "٥ أعداد متتالية مجموعهم ٦٥، ما أصغر عدد؟",
                  options: ["١٠", "١١", "١٢", "١٣"],
                  correctAnswer: 1,
                  explanation: "٥ن + ١٠ = ٦٥ ← ٥ن = ٥٥ ← ن = ١١",
                },
                {
                  id: "b2-q46-v2",
                  prompt: "٤ أعداد متتالية مجموعهم ٥٠، ما أصغر عدد؟",
                  options: ["١٠", "١١", "١٢", "١٣"],
                  correctAnswer: 1,
                  explanation: "٤ن + ٦ = ٥٠ ← ٤ن = ٤٤ ← ن = ١١",
                },
              ],
            },
            {
              id: "b2-q47",
              prompt: "إذا كان متوسط القيم ١٢، ٨، ٣، س يساوي ٢٠، ما قيمة س؟",
              options: ["٥٧", "٦٦", "٥٤", "٧٨"],
              correctAnswer: 0,
              howToSolve: "(١٢ + ٨ + ٣ + س) ÷ ٤ = ٢٠\n٢٣ + س = ٨٠\nس = ٥٧",
              variants: [
                {
                  id: "b2-q47-v1",
                  prompt: "إذا كان متوسط القيم ١٥، ١٠، ٥، س يساوي ١٥، ما قيمة س؟",
                  options: ["٢٥", "٣٠", "٣٥", "٤٠"],
                  correctAnswer: 1,
                  explanation: "(١٥+١٠+٥+س) ÷ ٤ = ١٥ ← ٣٠ + س = ٦٠ ← س = ٣٠",
                },
                {
                  id: "b2-q47-v2",
                  prompt: "إذا كان متوسط القيم ٢٠، ١٠، ٥، س يساوي ٢٥، ما قيمة س؟",
                  options: ["٥٥", "٦٠", "٦٥", "٧٠"],
                  correctAnswer: 2,
                  explanation: "(٢٠+١٠+٥+س) ÷ ٤ = ٢٥ ← ٣٥ + س = ١٠٠ ← س = ٦٥",
                },
              ],
            },
            {
              id: "b2-q48",
              prompt: "قطعة خشب طولها ٢٤ متر، يُراد تقطيعها إلى ٢٤ قطعة صغيرة، كم عدد مرات تقطيعها؟",
              options: ["٢٤", "٢٥", "٢٣", "٢٢"],
              correctAnswer: 2,
              howToSolve: "عدد القطعات = عدد القطع - ١\n= ٢٤ - ١ = ٢٣ قطعة",
              variants: [
                {
                  id: "b2-q48-v1",
                  prompt: "حبل طوله ١٥ متر، يُراد تقطيعه إلى ١٥ قطعة صغيرة، كم عدد مرات تقطيعه؟",
                  options: ["١٣", "١٤", "١٥", "١٦"],
                  correctAnswer: 1,
                  explanation: "عدد القطعات = ١٥ - ١ = ١٤",
                },
                {
                  id: "b2-q48-v2",
                  prompt: "شريط طوله ٢٠ متر، يُراد تقطيعه إلى ٢٠ قطعة صغيرة، كم عدد مرات تقطيعه؟",
                  options: ["١٨", "١٩", "٢٠", "٢١"],
                  correctAnswer: 1,
                  explanation: "عدد القطعات = ٢٠ - ١ = ١٩",
                },
              ],
            },
          ],
        },
      ],
    },
  ],
  verbal: [
    {
      id: "verbal-collection-1446",
      name: "تجميعات 1446",
      description: "أحدث تجميعات اللفظي",
      category: "verbal",
      questions: [
        {
          id: "v1",
          prompt: "اختر الكلمة المناسبة: الكتاب _____ المعرفة",
          options: ["باب", "مفتاح", "نافذة", "جدار"],
          correctAnswer: 1,
          explanation: "الكتاب مفتاح المعرفة - تعبير مجازي يدل على أن الكتاب يفتح أبواب العلم",
          skillTag: "completion",
        },
        {
          id: "v2",
          prompt: "ما مرادف كلمة 'سريع'؟",
          options: ["بطيء", "عاجل", "ثقيل", "خفيف"],
          correctAnswer: 1,
          explanation: "عاجل = سريع، كلاهما يدل على السرعة في الفعل أو الحركة",
          skillTag: "vocabulary",
        },
        {
          id: "v3",
          prompt: "ما ضد كلمة 'النجاح'؟",
          options: ["التفوق", "الفشل", "الصعود", "التقدم"],
          correctAnswer: 1,
          explanation: "الفشل هو عكس النجاح - عدم تحقيق الهدف المطلوب",
          skillTag: "vocabulary",
        },
        {
          id: "v4",
          prompt: "أكمل: الصبر _____ الفرج",
          options: ["قبل", "مفتاح", "بعد", "طريق"],
          correctAnswer: 1,
          explanation: "الصبر مفتاح الفرج - حكمة عربية تعني أن الصبر يؤدي إلى الفرج",
          skillTag: "completion",
        },
        {
          id: "v5",
          prompt: "ما معنى كلمة 'الجود'؟",
          options: ["البخل", "الكرم", "الفقر", "الغنى"],
          correctAnswer: 1,
          explanation: "الجود = الكرم = السخاء في العطاء",
          skillTag: "vocabulary",
        },
        {
          id: "v6",
          prompt: "اختر التناظر الصحيح: قلم : كتابة :: سكين : ؟",
          options: ["طبخ", "قطع", "أكل", "مطبخ"],
          correctAnswer: 1,
          explanation: "القلم أداة للكتابة، والسكين أداة للقطع - علاقة أداة ووظيفتها",
          skillTag: "analogy",
        },
        {
          id: "v7",
          prompt: "ما جمع كلمة 'كتاب'؟",
          options: ["كتابات", "كتب", "مكتبات", "كاتبون"],
          correctAnswer: 1,
          explanation: "كتب هو جمع تكسير لكلمة كتاب",
          skillTag: "grammar",
        },
        {
          id: "v8",
          prompt: "ما ضد كلمة 'الظلام'؟",
          options: ["الليل", "النور", "الغروب", "السواد"],
          correctAnswer: 1,
          explanation: "النور هو عكس الظلام - الضياء مقابل العتمة",
          skillTag: "vocabulary",
        },
        {
          id: "v9",
          prompt: "أكمل المثل: من جد _____",
          options: ["نجح", "وجد", "فاز", "تعلم"],
          correctAnswer: 1,
          explanation: "من جد وجد - مثل عربي يعني من اجتهد حصل على مراده",
          skillTag: "completion",
        },
        {
          id: "v10",
          prompt: "اختر الكلمة الشاذة: تفاح، برتقال، جزر، موز",
          options: ["تفاح", "برتقال", "جزر", "موز"],
          correctAnswer: 2,
          explanation: "جزر هو الشاذ لأنه من الخضروات، بينما الباقي فواكه",
          skillTag: "vocabulary",
        },
      ],
    },
    {
      id: "verbal-collection-mufakkir",
      name: "تجميعات المفكر",
      description: "تجميعات المفكر للقسم اللفظي",
      category: "verbal",
      questions: [
        {
          id: "mufakkir-v1",
          prompt: "سيتم إضافة الأسئلة قريباً",
          options: ["--", "--", "--", "--"],
          correctAnswer: 0,
          explanation: "هذا سؤال مؤقت",
        },
      ],
    },
  ],
};

interface LessonGridProps {
  category: string;
  onExerciseClick: (exercise: Exercise) => void;
  onCollectionClick?: (collection: Collection) => void;
}

const categoryNames: Record<string, string> = {
  "all-math": "الكمي - الكل",
  "quantitative": "الكمي - حساب",
  "algebra": "الكمي - جبر",
  "all-verbal": "اللفظي - الكل",
  "verbal": "البنك الأول",
  "analogy": "اللفظي - تناظر",
  "verbal-bank-2": "البنك الثاني",
  "verbal-bank-3": "البنك الثالث",
  "verbal-bank-4": "البنك الرابع",
  "verbal-bank-5": "البنك الخامس",
  "verbal-bank-6": "البنك السادس",
  "verbal-bank-7": "البنك السابع",
  "verbal-bank-8": "البنك الثامن",
  "mixed": "اختبار محاكي",
};

const difficultyLabels: Record<string, string> = {
  "beginner": "مبتدئ",
  "intermediate": "متوسط",
  "advanced": "متقدم",
};

const difficultyColors: Record<string, string> = {
  "beginner": "bg-turquoise text-turquoise-foreground",
  "intermediate": "bg-yellow text-yellow-foreground",
  "advanced": "bg-coral text-coral-foreground",
};

const LessonGrid = ({ category, onExerciseClick, onCollectionClick }: LessonGridProps) => {
  const { getExercisesByCategory } = useExercises();
  const [progress, setProgress] = useState<ExerciseProgress>({});

  // Load progress from localStorage
  useEffect(() => {
    setProgress(getAllProgress());

    // Listen for storage changes
    const handleStorage = () => setProgress(getAllProgress());
    window.addEventListener("storage", handleStorage);

    // Also poll for changes (for same-tab updates)
    const interval = setInterval(() => setProgress(getAllProgress()), 1000);

    return () => {
      window.removeEventListener("storage", handleStorage);
      clearInterval(interval);
    };
  }, []);

  // Don't show anything on initial load (default "quantitative" state)
  const isInitialState = category === "quantitative";
  const exercises = isInitialState ? [] : getExercisesByCategory(category);

  const isVerbalCategory = category === "verbal" || category === "analogy" || category.startsWith("verbal-bank-");
  const isMathCategory = category === "all-math" || category === "quantitative" || category === "algebra";
  const showProgress = isVerbalCategory || isMathCategory;

  // Get pinned collections based on category
  const getCollectionsForCategory = () => {
    if (category === "all-math" || category === "algebra") {
      return pinnedCollections.quantitative;
    }
    return [];
  };

  const collections = isInitialState ? [] : getCollectionsForCategory();

  // Check if this is a locked bank
  const isLockedBank = lockedBanks.includes(category);

  if (isLockedBank) {
    return (
      <div className="flex items-center justify-center min-h-[400px]">
        <motion.div
          className="bg-card/95 backdrop-blur-sm rounded-3xl p-8 md:p-12 text-center shadow-lg max-w-md mx-auto"
          initial={{ opacity: 0, scale: 0.95 }}
          animate={{ opacity: 1, scale: 1 }}
          transition={{ duration: 0.3 }}
        >
          <div className="w-20 h-20 mx-auto mb-6 rounded-full bg-yellow/20 flex items-center justify-center">
            <Lock className="w-10 h-10 text-yellow" />
          </div>
          <h3 className="text-2xl font-bold mb-3">محتوى مقفل</h3>
          <p className="text-muted-foreground mb-6">
            هذا البنك متاح فقط لمشتركي النسخة الاحترافية (Pro)
          </p>
          <motion.button
            className="px-6 py-3 bg-yellow text-yellow-foreground rounded-xl font-semibold"
            whileHover={{ scale: 1.02 }}
            whileTap={{ scale: 0.98 }}
          >
            الترقية لـ Pro
          </motion.button>
        </motion.div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Pinned Collections */}
      {collections.length > 0 && (
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.2 }}
        >
          <div className="flex items-center gap-2 mb-4">
            <Pin className="w-4 h-4 text-primary" />
            <h3 className="font-bold text-lg">التجميعات</h3>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {collections.map((collection, index) => (
              <motion.div
                key={collection.id}
                onClick={() => onCollectionClick?.(collection)}
                className="bg-gradient-to-l from-primary/10 to-turquoise/10 border-2 border-primary/30 rounded-3xl p-6 cursor-pointer group hover:border-primary/50 transition-all"
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.1 * index }}
                whileHover={{ scale: 1.02, y: -4 }}
                whileTap={{ scale: 0.98 }}
              >
                <div className="flex items-start justify-between mb-4">
                  <div className="w-12 h-12 rounded-2xl bg-primary/20 flex items-center justify-center group-hover:bg-primary/30 transition-colors">
                    <Library className="w-6 h-6 text-primary" />
                  </div>
                  <span className="px-3 py-1 rounded-full text-xs font-semibold bg-primary text-primary-foreground">
                    مثبت
                  </span>
                </div>
                <h3 className="font-bold text-lg mb-2">{collection.name}</h3>
                <p className="text-sm text-muted-foreground mb-4">{collection.description}</p>
                <div className="flex items-center justify-between text-sm text-muted-foreground">
                  <span>{collection.questions.length} سؤال</span>
                </div>
                <div className="mt-4 pt-4 border-t border-primary/20">
                  <div className="flex items-center justify-center gap-2 text-primary font-semibold">
                    <Play className="w-4 h-4 fill-current" />
                    <span>ابدأ التجميعة</span>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </motion.div>
      )}

      {/* Category Header - hidden on initial state */}
      {!isInitialState && (
        <motion.div
          className="flex flex-col sm:flex-row sm:items-center justify-between gap-3"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.5 }}
        >
          <div>
            <h2 className="text-xl md:text-2xl font-bold">{categoryNames[category] || category}</h2>
            <p className="text-sm text-muted-foreground">{exercises.length} تمارين متاحة</p>
          </div>

          <div className="flex items-center gap-2 md:gap-3">
            <motion.button
              className="hidden sm:flex items-center gap-2 px-4 py-2.5 bg-card rounded-xl text-sm font-semibold hover:bg-muted transition-colors"
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.98 }}
            >
              <Info className="w-4 h-4" />
              معلومات الوحدة
            </motion.button>

            {exercises.length > 0 && (
              <motion.button
                onClick={() => onExerciseClick(exercises[0])}
                className="flex items-center gap-2 px-4 md:px-5 py-2 md:py-2.5 bg-foreground text-background rounded-xl text-sm font-semibold hover:opacity-90 transition-opacity"
                whileHover={{ scale: 1.02 }}
                whileTap={{ scale: 0.98 }}
              >
                <Play className="w-4 h-4 fill-current" />
                ابدأ التمارين
              </motion.button>
            )}
          </div>
        </motion.div>
      )}

      {/* Exercise Cards Grid */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {exercises.map((exercise, index) => (
          <motion.div
            key={exercise.id}
            onClick={() => onExerciseClick(exercise)}
            className="bg-card rounded-2xl p-6 cursor-pointer group hover:bg-muted/50 transition-colors border border-transparent hover:border-primary/30"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.1 * index }}
            whileHover={{ scale: 1.02, y: -4 }}
            whileTap={{ scale: 0.98 }}
          >
            {/* Header */}
            <div className="flex items-start justify-between mb-4">
              <div className="w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center group-hover:bg-primary/30 transition-colors">
                <Brain className="w-6 h-6 text-primary" />
              </div>
              <span className={`px-3 py-1 rounded-full text-xs font-semibold ${difficultyColors[exercise.difficulty]}`}>
                {difficultyLabels[exercise.difficulty]}
              </span>
            </div>

            {/* Content */}
            <h3 className="font-bold text-lg mb-2">{exercise.title}</h3>
            <p className="text-sm text-muted-foreground mb-4 line-clamp-2">
              {exercise.description}
            </p>

            {/* Footer */}
            <div className="flex items-center justify-between text-sm text-muted-foreground">
              <div className="flex items-center gap-1">
                <Clock className="w-4 h-4" />
                <span>{exercise.duration}</span>
              </div>
              <div className="flex items-center gap-1">
                <span>{exercise.questions.length} أسئلة</span>
              </div>
            </div>

            {/* Progress Bar - for all exercises */}
            {showProgress && (() => {
              const totalQuestions = exercise.questions.length;
              const answeredQuestions = progress[exercise.id]?.answeredQuestions || 0;
              const percentage = totalQuestions > 0 ? Math.round((answeredQuestions / totalQuestions) * 100) : 0;
              return (
                <div className="mt-4">
                  <div className="flex items-center justify-between text-xs text-muted-foreground mb-1">
                    <span>التقدم</span>
                    <span>{percentage}%</span>
                  </div>
                  <div className="h-2 bg-muted rounded-full overflow-hidden">
                    <motion.div
                      className="h-full bg-turquoise rounded-full"
                      initial={{ width: 0 }}
                      animate={{ width: `${percentage}%` }}
                      transition={{ duration: 0.5 }}
                    />
                  </div>
                </div>
              );
            })()}

            {/* Play Overlay */}
            <div className="mt-4 pt-4 border-t border-border">
              <div className="flex items-center justify-center gap-2 text-primary font-semibold">
                <Play className="w-4 h-4 fill-current" />
                <span>{showProgress && progress[exercise.id]?.answeredQuestions > 0 ? "تابع التمرين" : "ابدأ التمرين"}</span>
              </div>
            </div>
          </motion.div>
        ))}

        {exercises.length === 0 && (
          <div className="col-span-full text-center py-12 text-muted-foreground">
            <Brain className="w-12 h-12 mx-auto mb-4 opacity-50" />
            {isInitialState ? (
              <>
                <p>اختر قسماً للبدء</p>
                <p className="text-sm">الكمي أو اللفظي أو اختبار محاكي</p>
              </>
            ) : (
              <>
                <p>لا توجد تمارين في هذا القسم حالياً</p>
                <p className="text-sm">سيتم إضافة تمارين جديدة قريباً</p>
              </>
            )}
          </div>
        )}
      </div>
    </div>
  );
};

export default LessonGrid;
